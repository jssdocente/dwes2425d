
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://jssdocente.github.io/dwes2425/07frameworks.html">
      
      
      
      
      <link rel="icon" href="imagenes/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>07frameworks - 2º DAW - Desarrollo Web en Entorno Servidor - Curso 24/25</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#frameworks-php-laravel" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="index.html" title="2º DAW - Desarrollo Web en Entorno Servidor - Curso 24/25" class="md-header__button md-logo" aria-label="2º DAW - Desarrollo Web en Entorno Servidor - Curso 24/25" data-md-component="logo">
      
  <img src="imagenes/logofp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            2º DAW - Desarrollo Web en Entorno Servidor - Curso 24/25
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              07frameworks
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Cambiar a modo noche"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Cambiar a modo día"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo día" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="2º DAW - Desarrollo Web en Entorno Servidor - Curso 24/25" class="md-nav__button md-logo" aria-label="2º DAW - Desarrollo Web en Entorno Servidor - Curso 24/25" data-md-component="logo">
      
  <img src="imagenes/logofp.png" alt="logo">

    </a>
    2º DAW - Desarrollo Web en Entorno Servidor - Curso 24/25
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01arquitecturas.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.- Arquitecturas Web
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2.- El lenguaje PHP
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            2.- El lenguaje PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="02_index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introducción
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="02.1_php_basico.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PHP Básico
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="02.2_php_avanzado.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PHP Avanzado
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="02.3_php_versiones_evolucion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PHP evolución
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="03phpoo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. PHP Orientado a Objetos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="04web.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.- Programación Web
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Anexo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Anexo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="extra/ArquitecturasWebExtendido.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Anexo I. Arquitecturas Web
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guias
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Guias
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="extra/guias/02.config_devenv_laravel_herd.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuración entorno desarrollo PHP con Laravel Herd
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<style>
    img { margin: 20px 0; border-radius: 8px; }

    .alert { color: #BD1550; }
    .warning { color: #E97F02; }
    .success { color: #8A9B0F; }

    .center { text-align: center; }
    .right { text-align: right; }

    .img-small { max-width: 200px; margin: auto; }
    .img-medium { max-width: 400px; margin: auto; }
    .img-large { max-width: 800px; margin: auto; }

    .leyenda {
        font-size: small;
        margin: 10px 0;
    }
</style>

<h1 id="frameworks-php-laravel">Frameworks PHP. Laravel<a class="headerlink" href="#frameworks-php-laravel" title="Permanent link">&para;</a></h1>
<blockquote>
<p>Duración estimada: 40 sesiones</p>
</blockquote>
<h2 id="puesta-en-marcha">Puesta en marcha<a class="headerlink" href="#puesta-en-marcha" title="Permanent link">&para;</a></h2>
<p>Lo primero de todo es crear una carpeta con el nombre del proyecto que vayamos a crear y nos metemos en ella.</p>
<p>Vamos a utilizar la imagen de Bitnami ya preparada, así que lo que hacer ahora es <a href="https://github.com/bitnami/bitnami-docker-laravel/blob/master/docker-compose.yml">descargar el archivo docker-compose.yml</a> del repositorio de Github oficial.</p>
<p>Una vez descargado el archivo en nuestra carpeta que acabamos de crear con el nombre del proyecto, lanzamos el siguiente comando por consola para instalar todas las dependencias y crear las imágenes de Docker correspondientes.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">docker-compose -p Laravel up -d</span>
</span></code></pre></div>
<p>Si todo ha salido bien podrás ver en el Visual Studio Code que se han creado 2 imágenes y que el servidor web de Laravel está funcionando bajo la siguiente URL.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><a href="#__codelineno-1-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">http://localhost:8000</span>
</span></code></pre></div>
<p>Si por alguna extraña razón <strong>estás en Windows</strong> y no te funciona una de las 2 imágenes, puede ser debido a la instalción de composer dentro de la imagen de Laravel.</p>
<div class="center img-large">
    <a class="glightbox" href="imagenes/07/error-laravel.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="imagenes/07/error-laravel.png"></a>
</div>

<p>Para solucionarlo, nos vamos a la carpeta del proyecto que se te habrá creado por defecto al hacer docker-compose, en este caso y si no has modificado el archivo .yml la carpeta del proyecto sera <code>my-proyect</code> y dentro de ella eliminamos la carpeta <code>vendor</code>.</p>
<p>Cuando hayamos eliminado dicha carpeta, necesitaremos instalar <code>Composer</code> de manera global en nuestro sistema Windows. Para ello. bájate el instalador <a href="https://getcomposer.org/Composer-Setup.exe">desde este enlace</a>.</p>
<p>Una vez lo instales ya serás capaz de lanzar el comando <code>composer</code> desde cualquier consola de Windows.</p>
<p>Por último, abrimos una consola dentro de la carpeta <code>my-project</code> o el nombre que le hayas puesto a la carpeta del proyecto de Laravel y ejecutamos el siguiente comando.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><a href="#__codelineno-2-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">composer install</span>
</span></code></pre></div>
<p>Para terminar tan sólo tendremos que volver a ejecutar el contenedor de Laravel desde Docker.</p>
<h3 id="vscode-extensiones">VSCode extensiones<a class="headerlink" href="#vscode-extensiones" title="Permanent link">&para;</a></h3>
<p>Recomendable instalar los siguientes plugins para Visual Studio Code</p>
<div class="language-text highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>  Laravel Blade Snippets
</code></pre></div>
<h2 id="carpetas-en-laravel">Carpetas en Laravel<a class="headerlink" href="#carpetas-en-laravel" title="Permanent link">&para;</a></h2>
<p>Al crear un nuevo proyecto con este framework, Laravel crea una serie de carpetas por defecto. Esta estructura de carpetas es la recomendada para utilizar Laravel.</p>
<h3 id="public">Public<a class="headerlink" href="#public" title="Permanent link">&para;</a></h3>
<p>Esta es la carpeta más importante ya que es donde se ponen todos los archivos que el cliente va a mostrar al usuario cuando introduzcamos la URL de nuestro sitio web. Normalmente se carga el archivo <code>index.php</code> por defecto.</p>
<h3 id="routes">Routes<a class="headerlink" href="#routes" title="Permanent link">&para;</a></h3>
<p>Otra de las carpetas que más vamos a usar a lo largo de este curso de Laravel. En ella se albergan todas las rutas (redirecciones web) de nuestro proyecto, pero más concretamente en el archivo <code>web.php</code></p>
<div class="language-text highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>Dada una ruta → se cargará una vista
</code></pre></div>
<h3 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h3>
<p>Esta es nuestra carpeta de recursos donde guardaremos los siguientes archivos, que también, están separados por sus carpetas... como cada nombre indica:</p>
<ul>
<li><code>css</code> Archivos CSS</li>
<li><code>js</code> Archivos JS (JavaScript)</li>
<li><code>lang</code> Archivos relacionados con el idioma del sitio (variables &amp; strings)</li>
<li><code>views</code> Archivos de nuestras vistas, lo que las rutas cargan</li>
</ul>
<h2 id="rutas">Rutas<a class="headerlink" href="#rutas" title="Permanent link">&para;</a></h2>
<p>Las rutas en Laravel (y en casi cualquier Framework) sirven para redireccionar al cliente (o navegador) a las vistas que nosotros queramos.</p>
<p>Estas rutas se configuran en el archivo <code>public/routes/web.php</code> donde se define la ruta que el usuario pone en la URL después del dominio y se retorna la vista que se quiere cargar al introducir dicha dirección en el navegador.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><a href="#__codelineno-3-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><a href="#__codelineno-3-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><a href="#__codelineno-3-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// Ruta por defecto para cargar la vista welcome cuando el usuario introduce simplemente el dominio</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a><a href="#__codelineno-3-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><a href="#__codelineno-3-5"><span class="linenos" data-linenos="5 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a><a href="#__codelineno-3-6"><span class="linenos" data-linenos="6 "></span></a>    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">);</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a><a href="#__codelineno-3-7"><span class="linenos" data-linenos="7 "></span></a><span class="p">});</span>
</span></code></pre></div>
<p>En el ejemplo de arriba vamos a cargar la vista llamada <code>welcome</code> que hace referencia a la vista <code>resources/views/welcome.blade.php</code></p>
<h3 id="alias">Alias<a class="headerlink" href="#alias" title="Permanent link">&para;</a></h3>
<p>Es interesante darle un alias o un nombre a nuestras rutas para poder utilizar dichos alias en nuestras plantillas de Laravel que veremos más adelante.</p>
<p>Para ello, basta con utilizar la palabra <code>name</code> al final de la estructura de la ruta y darle un nombre que queramos; normalmente descriptivo y asociado a la vista que tiene que cargar el enroutador de Laravel.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><a href="#__codelineno-4-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><a href="#__codelineno-4-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><a href="#__codelineno-4-3"><span class="linenos" data-linenos="3 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><a href="#__codelineno-4-4"><span class="linenos" data-linenos="4 "></span></a>    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">);</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><a href="#__codelineno-4-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">})</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;usuarios&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>Después veremos que es muy útil ya que a la hora de refactorizar o hacer un cambio, si tenemos enlaces o menús de navegación que apuntan a esta ruta, sólo tendríamos que cambiar el parámetro dentro del <code>get()</code> y no tener que ir archivo por archivo.</p>
<p>Laravel nos proporciona una manera más cómoda a la hora de cargar una vista si no queremos parámetros ni condiciones. Tan sólo definiremos la siguiente línea que hace referencia la ruta <code>datos</code> en la URL y va a cargar el archivo <code>usuarios.php</code> de nuestra carpeta <code>views</code> como le hemos indicado en el segundo parámetro.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><a href="#__codelineno-5-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><a href="#__codelineno-5-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><a href="#__codelineno-5-3"><span class="linenos" data-linenos="3 "></span></a><span class="cm">/* http://localhost/datos/ */</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><a href="#__codelineno-5-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><a href="#__codelineno-5-5"><span class="linenos" data-linenos="5 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;datos&#39;</span><span class="p">,</span> <span class="s1">&#39;usuarios&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>Pero no sólo podemos retornar una vista sino, desde un simple string a módulos propios de Laravel.</p>
<h3 id="parametros">Parámetros<a class="headerlink" href="#parametros" title="Permanent link">&para;</a></h3>
<p>Ya hemos visto que con PHP podemos pasar parámetros a través de la URL, como si fueran variables, que las recuperábamos a través del método GET o POST.</p>
<p>Con Laravel también podemos introducir parámetros pero de una forma más vistosa y ordenada, de tal manera que sea visualmente más cómodo de recordar y de indexar por los motores de búsqueda como Google.</p>
<div class="language-text highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>  http://localhost/cliente/324
</code></pre></div>
<p>Para configurar este tipo de rutas en nuestro archivo de rutas <code>public/routes/web.php</code> haremos lo siguiente.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><a href="#__codelineno-6-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><a href="#__codelineno-6-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><a href="#__codelineno-6-3"><span class="linenos" data-linenos="3 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;cliente/{id}&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a><a href="#__codelineno-6-4"><span class="linenos" data-linenos="4 "></span></a>    <span class="k">return</span><span class="p">(</span><span class="s1">&#39;Cliente con el id: &#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a><a href="#__codelineno-6-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">});</span>
</span></code></pre></div>
<p>¿Qué pasa si no introducimos un id y sólo navegamos hasta <code>cliente/</code> ? ... Nos va a devolver un 404</p>
<p>Para resolver ésto, podemos definir una ruta por defecto en caso de que el <code>id</code> (o parámetro) no sea pasado. Para ello usaremos el símbolo <code>?</code> en nuestro nombre de ruta e inicializaremos la variable con el valor que queramos.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><a href="#__codelineno-7-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><a href="#__codelineno-7-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><a href="#__codelineno-7-3"><span class="linenos" data-linenos="3 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;cliente/{id?}&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a><a href="#__codelineno-7-4"><span class="linenos" data-linenos="4 "></span></a>    <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;Cliente con el id: &#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a><a href="#__codelineno-7-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">});</span>
</span></code></pre></div>
<p>Ahora tenemos otro problema, porque estamos filtrando por id del cliente que, normalmente es un número, pero si metemos un parámetro que no sea un número, vamos a obtener un resultado no deseado.</p>
<p>Para resolver este caso haremos uso de la cláusula <code>where</code> junto con una expresión regular númerica.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><a href="#__codelineno-8-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a><a href="#__codelineno-8-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3"></a><a href="#__codelineno-8-3"><span class="linenos" data-linenos="3 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;cliente/{id?}&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4"></a><a href="#__codelineno-8-4"><span class="linenos" data-linenos="4 "></span></a>    <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;Cliente con el id: &#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5"></a><a href="#__codelineno-8-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">})</span> <span class="o">-&gt;</span> <span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>Además, podemos pasarle variables a nuestra URL para luego utilzarlas en nuestros archivos de plantillas o en archivos <code>.php</code> haciendo uso de un array asociativo. Veamos un ejemplo con la forma reducida para ahorrarnos código</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><a href="#__codelineno-9-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><a href="#__codelineno-9-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a><a href="#__codelineno-9-3"><span class="linenos" data-linenos="3 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;datos&#39;</span><span class="p">,</span> <span class="s1">&#39;usuarios&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">5446</span><span class="p">]);</span>
</span></code></pre></div>
<p>... y el archivo <code>resources/views/usuarios.php</code> debe tener algo parecido a ésto</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a><a href="#__codelineno-10-1"><span class="linenos" data-linenos="1 "></span></a><span class="cm">&lt;!-- Estructura típica de un archivo HTML5 --&gt;</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2"></a><a href="#__codelineno-10-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3"></a><a href="#__codelineno-10-3"><span class="linenos" data-linenos="3 "></span></a><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Usuario con id: <span class="cp">&lt;?= $id ?&gt;</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4"></a><a href="#__codelineno-10-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5"></a><a href="#__codelineno-10-5"><span class="linenos" data-linenos="5 "></span></a><span class="cm">&lt;!-- ... --&gt;</span>
</span></code></pre></div>
<p><strong><em>Con las plantillas de Laravel <code>blade.php</code> veremos cómo simplificar aún más nuestro código.</em></strong></p>
<p>Para más información acerca de las rutas, parámetros y expresiones regulares en las rutas puedes echar un vistazo a la <a href="https://laravel.com/docs/8.x/routing#route-parameters">documentación oficial de rutas</a> que contiene numerosos ejemplos.</p>
<h2 id="plantillas-o-templates">Plantillas o Templates<a class="headerlink" href="#plantillas-o-templates" title="Permanent link">&para;</a></h2>
<p>A través de las plantillas de Laravel vamos a escribir menos código PHP y vamos a tener nuestros archivos mejor organizados.</p>
<p><strong>Blade</strong> es el sistema de plantillas que trae Laravel, por eso los archivos de plantillas que guardamos en el directorio de <code>views</code> llevan la extensión <code>blade.php</code>.</p>
<p>De esta manera sabemos inmediatamente que se trata de una plantilla de Laravel y que forma parte de una vista que se mostrará en el navegador.</p>
<h3 id="directivas">Directivas<a class="headerlink" href="#directivas" title="Permanent link">&para;</a></h3>
<p>Laravel tiene un gran número de directivas que podemos utilizar para ahorrarnos mucho código repetitivo entre otras funciones.</p>
<p>Digamos que las directivas son pequeñas funciones ya escritas que aceptan parámetros y que cada una de ellas hace una función diferente dentro de Laravel.</p>
<ul>
<li><code>@yield</code> Define el contenido dinámico que se va a cargar. Se usa conjuntamente con @section</li>
<li><code>@section</code> y <code>@endsection</code> bloque de código dinámico</li>
<li><code>@extends</code> importa el contenido de una plantilla ya creada</li>
</ul>
<h3 id="separando-codigo">Separando código<a class="headerlink" href="#separando-codigo" title="Permanent link">&para;</a></h3>
<p>Veamos un ejemplo de cómo hacer uso del poder de Laravel para crear plantillas y no repetir código.</p>
<p>Supongamos que tenemos ciertas estructuras HTML repetidas como puede ser una cabecera <code>header</code>, un menú de navegación <code>nav</code> y un par de secciones que hacen uso de este mismo código.</p>
<p>Supongamos que tenemos 2 apartados en la web:</p>
<ul>
<li><code>Blog</code></li>
<li><code>Fotos</code></li>
</ul>
<p>Primero de todo tendremos que generar un archivo que haga de <code>plantilla</code> de nuestro sitio web.</p>
<p>Para ello creamos el archivo <code>plantilla.blade.php</code> dentro de nuestro directorio de plantillas <code>resources/views</code>.</p>
<p>Dicho archivo va a contener el típico código de una página simple de HTML y en el body añadiremos nuestros contenido estático y dinámico.</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><a href="#__codelineno-11-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a><a href="#__codelineno-11-2"><span class="linenos" data-linenos=" 2 "></span></a>    <span class="cm">&lt;!-- CONTENIDO ESTÁTICO PARA TODAS LAS SECCIONES --&gt;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a><a href="#__codelineno-11-3"><span class="linenos" data-linenos=" 3 "></span></a>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Bienvenid@s a Laravel<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4"></a><a href="#__codelineno-11-4"><span class="linenos" data-linenos=" 4 "></span></a>    <span class="p">&lt;</span><span class="nt">hr</span><span class="p">&gt;</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5"></a><a href="#__codelineno-11-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6"></a><a href="#__codelineno-11-6"><span class="linenos" data-linenos=" 6 "></span></a>    <span class="cm">&lt;!-- MENÚ --&gt;</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7"></a><a href="#__codelineno-11-7"><span class="linenos" data-linenos=" 7 "></span></a>    <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8"></a><a href="#__codelineno-11-8"><span class="linenos" data-linenos=" 8 "></span></a>        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">{{</span> <span class="na">route</span><span class="err">(&#39;</span><span class="na">noticias</span><span class="err">&#39;)</span> <span class="err">}}</span><span class="p">&gt;</span>Blog<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> | 
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9"></a><a href="#__codelineno-11-9"><span class="linenos" data-linenos=" 9 "></span></a>        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">{{</span> <span class="na">route</span><span class="err">(&#39;</span><span class="na">galeria</span><span class="err">&#39;)</span> <span class="err">}}</span><span class="p">&gt;</span>Fotos<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10"></a><a href="#__codelineno-11-10"><span class="linenos" data-linenos="10 "></span></a>    <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11"></a><a href="#__codelineno-11-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12"></a><a href="#__codelineno-11-12"><span class="linenos" data-linenos="12 "></span></a>    <span class="cm">&lt;!-- CONTENIDO DINÁMICO EN FUNCIÓN DE LA SECCIÓN QUE SE VISITA --&gt;</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13"></a><a href="#__codelineno-11-13"><span class="linenos" data-linenos="13 "></span></a>    <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14"></a><a href="#__codelineno-11-14"><span class="linenos" data-linenos="14 "></span></a>        @yield(&#39;apartado&#39;)
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15"></a><a href="#__codelineno-11-15"><span class="linenos" data-linenos="15 "></span></a>    <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16"></a><a href="#__codelineno-11-16"><span class="linenos" data-linenos="16 "></span></a><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></code></pre></div>
<p>Cada sección que haga uso de esta plantilla contendrá el texto estático <code>Bienvenid@s a Laravel</code> seguido de un menú de navegación con enlaces a cada una de las secciones y el contenido dinámico de cada sección.</p>
<p>Ahora crearemos los archivos dinámicos de cada una de las secciones, en nuestro caso <code>blog.blade.php</code> y <code>fotos.blade.php</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><a href="#__codelineno-12-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a><a href="#__codelineno-12-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a><a href="#__codelineno-12-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// blog.blade.php</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a><a href="#__codelineno-12-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a><a href="#__codelineno-12-5"><span class="linenos" data-linenos="5 "></span></a><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;plantilla&#39;</span><span class="p">)</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a><a href="#__codelineno-12-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a><a href="#__codelineno-12-7"><span class="linenos" data-linenos="7 "></span></a><span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;apartado&#39;</span><span class="p">)</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8"></a><a href="#__codelineno-12-8"><span class="linenos" data-linenos="8 "></span></a>  <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Estás</span> <span class="nx">en</span> <span class="nx">BLOG</span><span class="o">&lt;/</span><span class="nx">h2</span><span class="o">&gt;</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9"></a><a href="#__codelineno-12-9"><span class="linenos" data-linenos="9 "></span></a><span class="o">@</span><span class="nx">endsection</span>
</span></code></pre></div>
<p>Importamos el contenido de <code>plantilla</code> bajo la directiva <code>@extends</code> para que cargue los elementos estáticos que hemos declarado y con la directiva <code>@section</code> y <code>@endsection</code> definimos el bloque de código dinámico, en función de la sección que estemos visitando.</p>
<p>Ahora casi lo mismo para la sección de <code>fotos</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><a href="#__codelineno-13-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a><a href="#__codelineno-13-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><a href="#__codelineno-13-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// fotos.blade.html</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a><a href="#__codelineno-13-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><a href="#__codelineno-13-5"><span class="linenos" data-linenos="5 "></span></a><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;plantilla&#39;</span><span class="p">)</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a><a href="#__codelineno-13-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a><a href="#__codelineno-13-7"><span class="linenos" data-linenos="7 "></span></a><span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;apartado&#39;</span><span class="p">)</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8"></a><a href="#__codelineno-13-8"><span class="linenos" data-linenos="8 "></span></a>  <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Estás</span> <span class="nx">en</span> <span class="nx">FOTOS</span><span class="o">&lt;/</span><span class="nx">h2</span><span class="o">&gt;</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9"></a><a href="#__codelineno-13-9"><span class="linenos" data-linenos="9 "></span></a><span class="o">@</span><span class="nx">endsection</span>
</span></code></pre></div>
<p>El último paso que nos queda es configurar el archivo de rutas <code>routes/web.php</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><a href="#__codelineno-14-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a><a href="#__codelineno-14-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><a href="#__codelineno-14-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// web.php</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a><a href="#__codelineno-14-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5"></a><a href="#__codelineno-14-5"><span class="linenos" data-linenos="5 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="s1">&#39;blog&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;noticias&#39;</span><span class="p">);</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6"></a><a href="#__codelineno-14-6"><span class="linenos" data-linenos="6 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;fotos&#39;</span><span class="p">,</span> <span class="s1">&#39;fotos&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;galeria&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>De esta manera podremos hacer uso del menú de navegación que hemos puesto en nuestra plantilla y gracias a los alias <code>noticias</code> y <code>galeria</code>, la URL será más amigable.</p>
<h3 id="estructuras-de-control">Estructuras de control<a class="headerlink" href="#estructuras-de-control" title="Permanent link">&para;</a></h3>
<p>Como en todo buen lenguaje de programación, en Laravel también tenemos estructuras de control.</p>
<p>En Blade (plantillas de Laravel) siempre que iniciemos un bloque de estructura de control DEBEMOS cerrarla</p>
<ul>
<li><code>@foreach</code> ~ <code>@endforeach</code> lo usamos para recorrer arrays</li>
<li><code>@if</code> ~ <code>@endif</code> para comprobar condiciones lógicas</li>
<li><code>@switch</code> ~ <code>@endswitch</code> en función del valor de una variable ejecutar un código</li>
<li><code>@case</code> define la casuística del switch</li>
<li><code>@break</code> rompe la ejecución del código en curso</li>
<li><code>@default</code> si ninguna casuística se cumple</li>
</ul>
<div class="language-php highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a><a href="#__codelineno-15-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2"></a><a href="#__codelineno-15-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3"></a><a href="#__codelineno-15-3"><span class="linenos" data-linenos="3 "></span></a><span class="nv">$equipo</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;María&#39;</span><span class="p">,</span> <span class="s1">&#39;Alfredo&#39;</span><span class="p">,</span> <span class="s1">&#39;William&#39;</span><span class="p">,</span> <span class="s1">&#39;Verónica&#39;</span><span class="p">];</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4"></a><a href="#__codelineno-15-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5"></a><a href="#__codelineno-15-5"><span class="linenos" data-linenos="5 "></span></a><span class="o">@</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$equipo</span> <span class="k">as</span> <span class="nv">$nombre</span><span class="p">)</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6"></a><a href="#__codelineno-15-6"><span class="linenos" data-linenos="6 "></span></a>  <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span> <span class="p">{{</span> <span class="nv">$nombre</span> <span class="p">}}</span> <span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7"></a><a href="#__codelineno-15-7"><span class="linenos" data-linenos="7 "></span></a><span class="o">@</span><span class="k">endforeach</span>
</span></code></pre></div>
<p>Acordaros que podemos pasar variables a través de las rutas como si fueran parámetros. Pero en este caso, vamos a ver otra directiva más; el uso de <code>@compact</code>.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><a href="#__codelineno-16-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><a href="#__codelineno-16-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><a href="#__codelineno-16-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// Uso de @compact</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a><a href="#__codelineno-16-4"><span class="linenos" data-linenos="4 "></span></a><span class="nv">$equipo</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;María&#39;</span><span class="p">,</span> <span class="s1">&#39;Alfredo&#39;</span><span class="p">,</span> <span class="s1">&#39;William&#39;</span><span class="p">,</span> <span class="s1">&#39;Verónica&#39;</span><span class="p">];</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><a href="#__codelineno-16-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><a href="#__codelineno-16-6"><span class="linenos" data-linenos="6 "></span></a><span class="c1">// Route::view(&#39;nosotros&#39;, [&#39;equipo&#39; =&gt; &#39;equipo&#39;]);</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a><a href="#__codelineno-16-7"><span class="linenos" data-linenos="7 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;nosotros&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;equipo&#39;</span><span class="p">));</span>
</span></code></pre></div>
<h2 id="controladores">Controladores<a class="headerlink" href="#controladores" title="Permanent link">&para;</a></h2>
<p>Los controladores son el lugar perfecto para definir la lógica de negocio de nuestra aplicación o sitio web.</p>
<p>Hace de intermediario entre la vista (lo que vemos con nuestro navegador o cliente) y el servidor donde la app está alojada.</p>
<p>Por defecto, los controladores se guardan en una carpeta específica situada en <code>app/Http/Controllers</code> y tienen extensión <code>.php</code>.</p>
<p>Para crear un controlador nuevo debemos hacer uso de nuestro querido autómata <code>artisan</code> donde le diremos que cree un controlador con el nombre que nosotros queramos.</p>
<p>Abrimos la consola y nos situamos en la raíz de nuestro proyecto</p>
<p><div class="language-console highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a><a href="#__codelineno-17-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan make:controller PagesController</span>
</span></code></pre></div>
Si todo ha salido bien, recibiremos un mensaje por consola con que todo ha ido bien y podremos comprobar que, efectivamente se ha creado el archivo <code>PagesController.php</code> con una estructura básica de controlador, dentro de la carpeta <code>Controllers</code> que hemos descrito anteriormente.</p>
<p>Ahora podemos modificar nuestro archivo de rutas <code>web.pbp</code> para dejarlo limpio de lógica y trasladar ésta a nuestro nuevo controlador.</p>
<p>La idea de ésto es dejar el archivo <code>web.php</code> tan limpio como podamos para que, de un vistazo, se entienda todo perfectamente.</p>
<p><strong>RECUERDA</strong> que sólo movemos la lógica, mientras que las cláusulas como <code>where</code> y <code>name</code> las seguimos dejando en el archivo de rutas <code>web.php</code></p>
<p>Veamos cómo quedaría un refactor del archivo de rutas utilizando un <code>Controller</code> como el que acabamos de crear</p>
<p>Ahora nos quedaría de la siguiente manera</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><a href="#__codelineno-18-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a><a href="#__codelineno-18-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a><a href="#__codelineno-18-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// web.php (v2.0) ▒▒▒▒ Refactorizado</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a><a href="#__codelineno-18-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5"></a><a href="#__codelineno-18-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">use</span> <span class="nx">App\Http\Controllers\PagesController</span><span class="p">;</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6"></a><a href="#__codelineno-18-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7"></a><a href="#__codelineno-18-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8"></a><a href="#__codelineno-18-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;inicio&#39;</span> <span class="p">]);</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9"></a><a href="#__codelineno-18-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;datos&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;datos&#39;</span> <span class="p">]);</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10"></a><a href="#__codelineno-18-10"><span class="linenos" data-linenos="10 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;cliente/{id?}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;cliente&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">);</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11"></a><a href="#__codelineno-18-11"><span class="linenos" data-linenos="11 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;nosotros/{nosotros?}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;nosotros&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;nosotros&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>y en nuestro archivo controlador lo dejaríamos de la siguiente manera</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><a href="#__codelineno-19-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><a href="#__codelineno-19-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><a href="#__codelineno-19-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// PagesController.php</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a><a href="#__codelineno-19-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a><a href="#__codelineno-19-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6"></a><a href="#__codelineno-19-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7"></a><a href="#__codelineno-19-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="k">class</span> <span class="nc">PagesController</span> <span class="k">extends</span> <span class="nx">Controller</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8"></a><a href="#__codelineno-19-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">{</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9"></a><a href="#__codelineno-19-9"><span class="linenos" data-linenos=" 9 "></span></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">inicio</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">);</span> <span class="p">}</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10"></a><a href="#__codelineno-19-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11"></a><a href="#__codelineno-19-11"><span class="linenos" data-linenos="11 "></span></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">datos</span><span class="p">()</span> <span class="p">{</span> 
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12"></a><a href="#__codelineno-19-12"><span class="linenos" data-linenos="12 "></span></a>        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;usuarios&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">56</span><span class="p">]);</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13"></a><a href="#__codelineno-19-13"><span class="linenos" data-linenos="13 "></span></a>    <span class="p">}</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14"></a><a href="#__codelineno-19-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15"></a><a href="#__codelineno-19-15"><span class="linenos" data-linenos="15 "></span></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">cliente</span><span class="p">(</span><span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16"></a><a href="#__codelineno-19-16"><span class="linenos" data-linenos="16 "></span></a>        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;Cliente con el id: &#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17"></a><a href="#__codelineno-19-17"><span class="linenos" data-linenos="17 "></span></a>    <span class="p">}</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18"></a><a href="#__codelineno-19-18"><span class="linenos" data-linenos="18 "></span></a>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19"></a><a href="#__codelineno-19-19"><span class="linenos" data-linenos="19 "></span></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">nosotros</span><span class="p">(</span><span class="nv">$nombre</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20"></a><a href="#__codelineno-19-20"><span class="linenos" data-linenos="20 "></span></a>        <span class="nv">$equipo</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21"></a><a href="#__codelineno-19-21"><span class="linenos" data-linenos="21 "></span></a>            <span class="s1">&#39;Paco&#39;</span><span class="p">,</span>
</span><span id="__span-19-22"><a id="__codelineno-19-22" name="__codelineno-19-22"></a><a href="#__codelineno-19-22"><span class="linenos" data-linenos="22 "></span></a>            <span class="s1">&#39;Enrique&#39;</span><span class="p">,</span>
</span><span id="__span-19-23"><a id="__codelineno-19-23" name="__codelineno-19-23"></a><a href="#__codelineno-19-23"><span class="linenos" data-linenos="23 "></span></a>            <span class="s1">&#39;Maria&#39;</span><span class="p">,</span>
</span><span id="__span-19-24"><a id="__codelineno-19-24" name="__codelineno-19-24"></a><a href="#__codelineno-19-24"><span class="linenos" data-linenos="24 "></span></a>            <span class="s1">&#39;Veronica&#39;</span>
</span><span id="__span-19-25"><a id="__codelineno-19-25" name="__codelineno-19-25"></a><a href="#__codelineno-19-25"><span class="linenos" data-linenos="25 "></span></a>        <span class="p">];</span>
</span><span id="__span-19-26"><a id="__codelineno-19-26" name="__codelineno-19-26"></a><a href="#__codelineno-19-26"><span class="linenos" data-linenos="26 "></span></a>
</span><span id="__span-19-27"><a id="__codelineno-19-27" name="__codelineno-19-27"></a><a href="#__codelineno-19-27"><span class="linenos" data-linenos="27 "></span></a>        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;nosotros&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;equipo&#39;</span><span class="p">,</span> <span class="s1">&#39;nombre&#39;</span><span class="p">));</span>
</span><span id="__span-19-28"><a id="__codelineno-19-28" name="__codelineno-19-28"></a><a href="#__codelineno-19-28"><span class="linenos" data-linenos="28 "></span></a>    <span class="p">}</span>
</span><span id="__span-19-29"><a id="__codelineno-19-29" name="__codelineno-19-29"></a><a href="#__codelineno-19-29"><span class="linenos" data-linenos="29 "></span></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="migraciones-eloquent">Migraciones &amp; Eloquent<a class="headerlink" href="#migraciones-eloquent" title="Permanent link">&para;</a></h2>
<p>Con las migraciones vamos a gestionar la base de datos de nuestro sitio web; tanto crear nuevas BBDD como editarlas desde Laravel.</p>
<p>Las migraciones de un sitio hecho con Laravel se alojan en la ruta <code>database/migrations</code> y tienen extensión <code>.php</code>.</p>
<p>Si te fijas, nada más instalar Laravel con la imagen de Bitnami, se han creado varios archivos de migraciones que podemos usar, pero de momento los dejamos ahí y <strong>NO LOS BORRAMOS</strong> porque son muy útiles.</p>
<h3 id="archivos-env">Archivos .env<a class="headerlink" href="#archivos-env" title="Permanent link">&para;</a></h3>
<p>Es de uso común trabajr con archivos de entorno llamados también <code>archivos .env</code>. Normalmente, eun unproyecto real puedes encontrarte con varios archivos de este tipo en función del despliegue que se quiera hacer; como por ejemplo:</p>
<ul>
<li><code>test.env</code> config. para desplegar en entorno seguro de pruebas</li>
<li><code>release.env</code> config. para desplegar cambios de versión que se envía a los <em>beta testers</em></li>
<li><code>production.env</code>config. para desplegar el código ya probado al resto del mundo.</li>
</ul>
<p>En nuestro caso, como no vamos a desplegar nada, sólo vamos a usar un único archivo <code>.env</code> y en cuestión de las migraciones vamos a fijarnos a partir de la línea 11 donde dice:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><a href="#__codelineno-20-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">DB_CONNECTION=mysql</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><a href="#__codelineno-20-2"><span class="linenos" data-linenos="2 "></span></a><span class="go">DB_HOST=127.0.0.1</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a><a href="#__codelineno-20-3"><span class="linenos" data-linenos="3 "></span></a><span class="go">DB_PORT=3306</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><a href="#__codelineno-20-4"><span class="linenos" data-linenos="4 "></span></a><span class="go">DB_DATABASE=blog</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><a href="#__codelineno-20-5"><span class="linenos" data-linenos="5 "></span></a><span class="go">DB_USERNAME=root</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><a href="#__codelineno-20-6"><span class="linenos" data-linenos="6 "></span></a><span class="go">DB_PASSWORD=</span>
</span></code></pre></div>
<p>En este archivo debemos configurar los datos de nuestro servidor MySQL y rellenarlo con la información correspondiente a nuestra base de datos <span class="alert"><strong><em>ya creada</em></strong></span></p>
<p>Una vez tengamos ésto, lo que nos queda es ejecutar el comando de las migraciones a través del CLI <code>artisan</code></p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a><a href="#__codelineno-21-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan migrate</span>
</span></code></pre></div>
<p>Si todo ha salido bien obtendremos el siguiente resultado donde podremos observar que todas las migraciones se han insertado correctamente en la base de datos.</p>
<div class="center img-large">
    <a class="glightbox" href="imagenes/07/migraciones.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="imagenes/07/migraciones.png"></a>
</div>

<p>Si nos vamos al cliente que utilicemos para manejar la base de datos (phpMyAdmin por ejemplo) veremos que en nuestra base de datos se han creado todas las tablas de la migración que hemos ejecutado y <strong>además</strong> una tabla que se llama <span class="success"><strong><em>migrations</em></strong></span>.</p>
<p>La tabla <code>migrations</code> es simplemente un registro de todas las migraciones llevadas a cabo. Además, podemos hacer un <strong><em>rollback</em></strong> en caso de que queramos reestablecer nuestra base de datos.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><a href="#__codelineno-22-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan migrate:rollback</span>
</span></code></pre></div>
<p>O si preferimos hacer un reset para dejarla limpia</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a><a href="#__codelineno-23-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan migrate:reset</span>
</span></code></pre></div>
<h3 id="modelos">Modelos<a class="headerlink" href="#modelos" title="Permanent link">&para;</a></h3>
<p>Gracias a Eloquent y su integración con Laravel, podremos crear modelos de datos de una manera automatizada a través de <code>artisan</code></p>
<p>Ahora que ya sabemos manejar las migraciones es hora de crear nuestras propias migraciones pero a través de Eloquent.</p>
<p>A través de la instrucción <code>make:model</code> creamos un nuevo modelo de datos, a continuación ponemos el nombre <span class="alert"><strong><em>siempre empezando en Mayúsucla y en SINGULAR</em></strong></span> y pasamos el parámetro relacionado con las migraciones <code>-m</code>.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><a href="#__codelineno-24-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan make:model Nota -m</span>
</span></code></pre></div>
<p>Si todo ha salido bien, veremos en nuestro directorio de migraciones <code>database/migrations</code> un nuevo archivo que se llama <code>2022_01_07_81237_create_notas_table.php</code>.</p>
<p>El siguiente paso es ver nuestro archivo de migraciones y editarlo para que contenga las tablas que nosotros queramos. Si lo visualizamos tan sólo tendrá la estructura básica con un par de tablas. Vamos a añadir un par de tablas más.</p>
<p><div class="language-php highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><a href="#__codelineno-25-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a><a href="#__codelineno-25-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3"></a><a href="#__codelineno-25-3"><span class="linenos" data-linenos="3 "></span></a><span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;notas&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4"></a><a href="#__codelineno-25-4"><span class="linenos" data-linenos="4 "></span></a>  <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5"></a><a href="#__codelineno-25-5"><span class="linenos" data-linenos="5 "></span></a>  <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6"></a><a href="#__codelineno-25-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7"></a><a href="#__codelineno-25-7"><span class="linenos" data-linenos="7 "></span></a>  <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">);</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8"></a><a href="#__codelineno-25-8"><span class="linenos" data-linenos="8 "></span></a>  <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;descripcion&#39;</span><span class="p">);</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9"></a><a href="#__codelineno-25-9"><span class="linenos" data-linenos="9 "></span></a><span class="p">});</span>
</span></code></pre></div>
En esta <code>Schema</code> podemos poner todas las tablas que nosotros queramos y establecer el tipo de dato para cada una de ellas, así como el nombre.</p>
<p>Una vez que estamos satisfechos con nuestro esquema debemos volver a ejecutar el código de migración a través de artisan para que se introduzca esta nueva información en la base de datos.</p>
<p>Para ver todos los tipos de datos que maneja Eloquent puedes visitar la <a href="https://laravel.com/docs/5.0/schema#adding-columns">documentación oficial</a>.</p>
<h3 id="recuperando-datos">Recuperando datos<a class="headerlink" href="#recuperando-datos" title="Permanent link">&para;</a></h3>
<p>Ya tenemos nuestra base de datos creada con nuestras tablas migradas, ahora sólo falta rellenar esas tablas con datos para poder pintarlos en nuestro código HTML.</p>
<p>Rellenamos las tablas a través del cliente de MySQL que más nos guste:</p>
<ul>
<li>PHP MyAdmin</li>
<li><a href="https://www.mysql.com/products/workbench/">MySQL Workbench</a></li>
<li><a href="https://www.heidisql.com/download.php">HeidiSQL</a> *</li>
<li><a href="http://www.squirrelsql.org/#installation">SquirrelSQL</a></li>
</ul>
<p>Ahora tendremos que irnos a una vista ya creada o creamos una nueva y solicitamos los datos desde el HTML.</p>
<p>¿Nos acordamos del <code>PagesController</code>? pues hacer uso de su magia junto con las rutas que creamos en <code>web.php</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><a href="#__codelineno-26-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a><a href="#__codelineno-26-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a><a href="#__codelineno-26-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ web.php </span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a><a href="#__codelineno-26-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5"></a><a href="#__codelineno-26-5"><span class="linenos" data-linenos="5 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;notas&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;notas&#39;</span> <span class="p">]);</span>
</span></code></pre></div>
<p>Antes de intentar entrar, debemos configurar nuestro controlador de la siguiente manera:</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a><a href="#__codelineno-27-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2"></a><a href="#__codelineno-27-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3"></a><a href="#__codelineno-27-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ PagesController.php </span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4"></a><a href="#__codelineno-27-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5"></a><a href="#__codelineno-27-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">notas</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6"></a><a href="#__codelineno-27-6"><span class="linenos" data-linenos="6 "></span></a>  <span class="nv">$notas</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7"></a><a href="#__codelineno-27-7"><span class="linenos" data-linenos="7 "></span></a>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8"></a><a href="#__codelineno-27-8"><span class="linenos" data-linenos="8 "></span></a>  <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;notas&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;notas&#39;</span><span class="p">));</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9"></a><a href="#__codelineno-27-9"><span class="linenos" data-linenos="9 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>El último paso sería, crear la vista con la tabla que pinte los datos a través de la variable que le pasamos por parámetro en la ruta que acabamos de describir.</p>
<p><div class="language-php highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><a href="#__codelineno-28-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a><a href="#__codelineno-28-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a><a href="#__codelineno-28-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// estamos en ▓▓▓ notas.blade.php </span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4"></a><a href="#__codelineno-28-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5"></a><a href="#__codelineno-28-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Notas</span> <span class="nx">desde</span> <span class="nx">base</span> <span class="nx">de</span> <span class="nx">datos</span><span class="o">&lt;/</span><span class="nx">h1</span><span class="o">&gt;</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6"></a><a href="#__codelineno-28-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7"></a><a href="#__codelineno-28-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="o">&lt;</span><span class="nx">table</span> <span class="nx">border</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="o">&gt;</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8"></a><a href="#__codelineno-28-8"><span class="linenos" data-linenos=" 8 "></span></a>    <span class="o">&lt;</span><span class="nx">thead</span><span class="o">&gt;</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9"></a><a href="#__codelineno-28-9"><span class="linenos" data-linenos=" 9 "></span></a>        <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10"></a><a href="#__codelineno-28-10"><span class="linenos" data-linenos="10 "></span></a>            <span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">Nombre</span><span class="o">&lt;/</span><span class="nx">th</span><span class="o">&gt;</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11"></a><a href="#__codelineno-28-11"><span class="linenos" data-linenos="11 "></span></a>            <span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">Descripción</span><span class="o">&lt;/</span><span class="nx">th</span><span class="o">&gt;</span>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12"></a><a href="#__codelineno-28-12"><span class="linenos" data-linenos="12 "></span></a>        <span class="o">&lt;/</span><span class="nx">tr</span><span class="o">&gt;</span>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13"></a><a href="#__codelineno-28-13"><span class="linenos" data-linenos="13 "></span></a>    <span class="o">&lt;/</span><span class="nx">thead</span><span class="o">&gt;</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14"></a><a href="#__codelineno-28-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15"></a><a href="#__codelineno-28-15"><span class="linenos" data-linenos="15 "></span></a>    <span class="o">@</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$notas</span> <span class="k">as</span> <span class="nv">$nota</span><span class="p">)</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16"></a><a href="#__codelineno-28-16"><span class="linenos" data-linenos="16 "></span></a>        <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17"></a><a href="#__codelineno-28-17"><span class="linenos" data-linenos="17 "></span></a>            <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{{</span><span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">nombre</span><span class="p">}}</span><span class="o">&lt;/</span><span class="nx">td</span><span class="o">&gt;</span>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18"></a><a href="#__codelineno-28-18"><span class="linenos" data-linenos="18 "></span></a>            <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{{</span><span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">descripcion</span><span class="p">}}</span><span class="o">&lt;/</span><span class="nx">td</span><span class="o">&gt;</span>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19"></a><a href="#__codelineno-28-19"><span class="linenos" data-linenos="19 "></span></a>        <span class="o">&lt;/</span><span class="nx">tr</span><span class="o">&gt;</span>
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20"></a><a href="#__codelineno-28-20"><span class="linenos" data-linenos="20 "></span></a>    <span class="o">@</span><span class="k">endforeach</span>
</span><span id="__span-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21"></a><a href="#__codelineno-28-21"><span class="linenos" data-linenos="21 "></span></a><span class="o">&lt;/</span><span class="nx">table</span><span class="o">&gt;</span>
</span></code></pre></div>
Hay que fijarse bien en los nombres de las columnas que tienen nuestras bases de datos, es justo lo que va después de <code>-&gt;</code> y siempre rodeado por los símbolos <code>{{  }}</code> ya que estamos en un archivo de plantilla.</p>
<p>¿Qué pasaría si sólo queremos acceder a un único elemento? como si hiciésemos un <code>SELECT * from usuarios where id = 1</code></p>
<p>Para éso, tenemos una instrucción específica en Eloquent que nos soluciona el problema. En este caso usaremos la instrucción <code>findOrFail</code> y como buenos usuarios de Laravel, lo utilizaremos dentro del controlador.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><a href="#__codelineno-29-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a><a href="#__codelineno-29-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3"></a><a href="#__codelineno-29-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ PagesController.php </span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4"></a><a href="#__codelineno-29-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5"></a><a href="#__codelineno-29-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">detalle</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6"></a><a href="#__codelineno-29-6"><span class="linenos" data-linenos="6 "></span></a>  <span class="nv">$nota</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7"></a><a href="#__codelineno-29-7"><span class="linenos" data-linenos="7 "></span></a>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8"></a><a href="#__codelineno-29-8"><span class="linenos" data-linenos="8 "></span></a>  <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;notas.detalle&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;nota&#39;</span><span class="p">));</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9"></a><a href="#__codelineno-29-9"><span class="linenos" data-linenos="9 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Hay que acordarse que debemos configurar la ruta en nuestro archivo de rutas.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><a href="#__codelineno-30-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a><a href="#__codelineno-30-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3"></a><a href="#__codelineno-30-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ web.php </span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4"></a><a href="#__codelineno-30-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5"></a><a href="#__codelineno-30-5"><span class="linenos" data-linenos="5 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;notas/{id?}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;detalle&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notas.detalle&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>Y por último, debemos crear la plantilla, pero como es un archivo de detalle o que está relacionado con otra plantilla ya creada, podemos crear una carpeta con el nombre de la plantilla y dentro, el archivo de plantilla en cuestión.</p>
<p>De tal manera que quedaría así <code>resources/views/notas/detalle.blade.php</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><a href="#__codelineno-31-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><a href="#__codelineno-31-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a><a href="#__codelineno-31-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// estamos en ▓▓▓ detalle.blade.php</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a><a href="#__codelineno-31-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a><a href="#__codelineno-31-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;plantilla&#39;</span><span class="p">)</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6"></a><a href="#__codelineno-31-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7"></a><a href="#__codelineno-31-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;apartado&#39;</span><span class="p">)</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8"></a><a href="#__codelineno-31-8"><span class="linenos" data-linenos=" 8 "></span></a>    <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Detalle</span> <span class="nx">de</span> <span class="nx">la</span> <span class="nx">nota</span><span class="o">&lt;/</span><span class="nx">h1</span><span class="o">&gt;</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9"></a><a href="#__codelineno-31-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10"></a><a href="#__codelineno-31-10"><span class="linenos" data-linenos="10 "></span></a>    <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">ID</span><span class="o">:</span> <span class="p">{{</span> <span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">id</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h3</span><span class="o">&gt;</span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11"></a><a href="#__codelineno-31-11"><span class="linenos" data-linenos="11 "></span></a>    <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Nombre</span><span class="o">:</span> <span class="p">{{</span> <span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">nombre</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h3</span><span class="o">&gt;</span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12"></a><a href="#__codelineno-31-12"><span class="linenos" data-linenos="12 "></span></a>    <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Descripción</span><span class="o">:</span> <span class="p">{{</span> <span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">descripcion</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h3</span><span class="o">&gt;</span>    
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13"></a><a href="#__codelineno-31-13"><span class="linenos" data-linenos="13 "></span></a><span class="o">@</span><span class="nx">endsection</span>
</span></code></pre></div>
<h3 id="modificar-tablas-sin-perder-datos">Modificar tablas sin perder datos<a class="headerlink" href="#modificar-tablas-sin-perder-datos" title="Permanent link">&para;</a></h3>
<p>Uno de los dilemas que tenemos a la hora de manejar las bases de datos con Laravel y Eloquent, es que a veces cometemos errores y queremos introducir una nueva columna dentro de nuestra tabla o modificar una de esas columnas <span class="alert"><strong><em>SIN PERDER LOS DATOS DE LA BASE DE DATOS</em></strong></span>.</p>
<p>Imaginemos que en nuestra tabla <code>notas</code> queremos agregar una columna con el nombre <code>autor</code>.</p>
<p>Lo primero de todo es crear una nueva migración para realizar este cambio. Para ello, haremos uso de nuestro querido <code>artisan</code> y debemos crear el nombre de esta migración con la siguiente fórmula <code>add_fields_to_</code> seguidamente del nombre de la tabla que queremos modificar.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><a href="#__codelineno-32-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan migrate add_fields_to_nota</span>
</span></code></pre></div>
<p>Seguidamente, nos metemos en el archivo de la migración que acabamos de crear y en el apartado up() debemos poner el cambio que queremos realizar y en la sección down() debemos hacer lo mismo pero tenemos que decirle a Eloquent que la elimine ¿por qué? para en caso de hacer migrate rollback, se cargue este nuevo campo que hemos creado.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a><a href="#__codelineno-33-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a><a href="#__codelineno-33-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3"></a><a href="#__codelineno-33-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4"></a><a href="#__codelineno-33-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="p">{</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5"></a><a href="#__codelineno-33-5"><span class="linenos" data-linenos=" 5 "></span></a>  <span class="nx">Schema</span><span class="o">::</span><span class="na">table</span><span class="p">(</span><span class="s1">&#39;notas&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6"></a><a href="#__codelineno-33-6"><span class="linenos" data-linenos=" 6 "></span></a>      <span class="nv">$table</span> <span class="o">-&gt;</span> <span class="na">string</span><span class="p">(</span><span class="s1">&#39;autor&#39;</span><span class="p">);</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7"></a><a href="#__codelineno-33-7"><span class="linenos" data-linenos=" 7 "></span></a>  <span class="p">});</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8"></a><a href="#__codelineno-33-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">}</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9"></a><a href="#__codelineno-33-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10"></a><a href="#__codelineno-33-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11"></a><a href="#__codelineno-33-11"><span class="linenos" data-linenos="11 "></span></a><span class="p">{</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12"></a><a href="#__codelineno-33-12"><span class="linenos" data-linenos="12 "></span></a>  <span class="nx">Schema</span><span class="o">::</span><span class="na">table</span><span class="p">(</span><span class="s1">&#39;notas&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-33-13"><a id="__codelineno-33-13" name="__codelineno-33-13"></a><a href="#__codelineno-33-13"><span class="linenos" data-linenos="13 "></span></a>      <span class="nv">$table</span> <span class="o">-&gt;</span> <span class="na">dropColumn</span><span class="p">(</span><span class="s1">&#39;autor&#39;</span><span class="p">);</span>
</span><span id="__span-33-14"><a id="__codelineno-33-14" name="__codelineno-33-14"></a><a href="#__codelineno-33-14"><span class="linenos" data-linenos="14 "></span></a>  <span class="p">});</span>
</span><span id="__span-33-15"><a id="__codelineno-33-15" name="__codelineno-33-15"></a><a href="#__codelineno-33-15"><span class="linenos" data-linenos="15 "></span></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="formularios">Formularios<a class="headerlink" href="#formularios" title="Permanent link">&para;</a></h2>
<p>Ahora que ya sabemos cómo cargar de una base de datos, vamos a ver cómo insertarlos con Laravel y sin escribir ni una sola línea de SQL.</p>
<p>Gracias al método <code>save()</code> de Laravel podremos guardar datos que provengan de un formulario desde nuestras plantillas. Para ello, lo primero que necesitamos lo siguiente:</p>
<ul>
<li><code>formulario HTML</code> que recoja los datos que el usuario introduce</li>
<li>Una <code>ruta</code> que sea la encargada de recibir los datos del formulario</li>
<li>Método <code>POST</code> para enviar los datos al servidor</li>
<li>Un método en nuestro <code>controlador</code> que procese los datos y los guarde a través de <code>save()</code></li>
<li>La cláusula de seguridad <code>@csrf</code> para evitar ataques desde otros sitios</li>
</ul>
<p>Así pues, empecemos por el formulario</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><a href="#__codelineno-34-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;notas.crear&#39;) }}&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a><a href="#__codelineno-34-2"><span class="linenos" data-linenos=" 2 "></span></a>    @csrf {{-- Cláusula para obtener un token de formulario al enviarlo --}}
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a><a href="#__codelineno-34-3"><span class="linenos" data-linenos=" 3 "></span></a>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a><a href="#__codelineno-34-4"><span class="linenos" data-linenos=" 4 "></span></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;nombre&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Nombre de la nota&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control mb-2&quot;</span> <span class="na">autofocus</span><span class="p">&gt;</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a><a href="#__codelineno-34-5"><span class="linenos" data-linenos=" 5 "></span></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;descripcion&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Descripción de la nota&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control mb-2&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6"></a><a href="#__codelineno-34-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7"></a><a href="#__codelineno-34-7"><span class="linenos" data-linenos=" 7 "></span></a>    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-primary btn-block&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8"></a><a href="#__codelineno-34-8"><span class="linenos" data-linenos=" 8 "></span></a>      Crear nueva nota
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9"></a><a href="#__codelineno-34-9"><span class="linenos" data-linenos=" 9 "></span></a>    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10"></a><a href="#__codelineno-34-10"><span class="linenos" data-linenos="10 "></span></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></code></pre></div>
<p>Como vemos, creamos 2 inputs relacionados con nuestras columnas dentro de la tabla, en este caso <code>nombre</code> y <code>descripción</code></p>
<p>El <code>action</code> del formulario debe apuntar a una nueva ruta que vayamos a crear y donde enviemos los datos mediante <code>POST</code>.</p>
<p>Ahora crearemos la ruta en nuestro archivo de rutas <code>web.php</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><a href="#__codelineno-35-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a><a href="#__codelineno-35-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><a href="#__codelineno-35-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ web.php</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a><a href="#__codelineno-35-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><a href="#__codelineno-35-5"><span class="linenos" data-linenos="5 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;notas&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;crear&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notas.crear&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>Si nos fijamos, ya no estamos haciendo uso del <code>get</code>sino del método <code>post</code> y como son métodos diferentes, podemos nombrar la ruta de la misma manera que en <code>get</code> ya que no habrá conflicto.</p>
<p>Por otro lado, necesitamos invocar nuestro <code>PagesController</code>famoso y decirle que vamos a utilizar el método <code>crear</code> que bueno, todavía no existe pero que vamos a crear a contnuación. No olvidemos crear un alias para poder vincularlo al <code>action</code>del formulario <span class="alert"><strong><em>SUPER IMPORTANTE</em></strong></span>.</p>
<p>Para terminar, editaremos nuetro archivo <code>PagesController.php</code> para que el controlador que estamos usando tenga el método que hemos nombrado previamente.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><a href="#__codelineno-36-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2"></a><a href="#__codelineno-36-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3"></a><a href="#__codelineno-36-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// estamos en ▓▓▓ PagesController.php</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4"></a><a href="#__codelineno-36-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5"></a><a href="#__codelineno-36-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">use</span> <span class="nx">App\Models\Nota</span><span class="p">;</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6"></a><a href="#__codelineno-36-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7"></a><a href="#__codelineno-36-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8"></a><a href="#__codelineno-36-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">crear</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9"></a><a href="#__codelineno-36-9"><span class="linenos" data-linenos=" 9 "></span></a>    <span class="nv">$notaNueva</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Nota</span><span class="p">;</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10"></a><a href="#__codelineno-36-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11"></a><a href="#__codelineno-36-11"><span class="linenos" data-linenos="11 "></span></a>    <span class="nv">$notaNueva</span> <span class="o">-&gt;</span> <span class="na">nombre</span> <span class="o">=</span> <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">nombre</span><span class="p">;</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12"></a><a href="#__codelineno-36-12"><span class="linenos" data-linenos="12 "></span></a>    <span class="nv">$notaNueva</span> <span class="o">-&gt;</span> <span class="na">descripcion</span> <span class="o">=</span> <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">descripcion</span><span class="p">;</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13"></a><a href="#__codelineno-36-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14"></a><a href="#__codelineno-36-14"><span class="linenos" data-linenos="14 "></span></a>    <span class="nv">$notaNueva</span> <span class="o">-&gt;</span> <span class="na">save</span><span class="p">();</span>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15"></a><a href="#__codelineno-36-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16"></a><a href="#__codelineno-36-16"><span class="linenos" data-linenos="16 "></span></a>    <span class="k">return</span> <span class="nx">back</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="na">with</span><span class="p">(</span><span class="s1">&#39;mensaje&#39;</span><span class="p">,</span> <span class="s1">&#39;Nota agregada exitósamente&#39;</span><span class="p">);</span>
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17"></a><a href="#__codelineno-36-17"><span class="linenos" data-linenos="17 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Nuestro método <code>crear</code> va a recibir un objeto llamado <code>$request</code> (el cual podemos cambiarle el nombre perfectamente) de tipo <code>Request</code> por lo que <span class="alert"><strong><em>DEBEMOS IMPORTAR Request</em></strong></span> para poder utilizar dicha clase de Laravel.</p>
<p>Dentro del método <code>crear</code> que acabamos de escribir, debemos hacer uso del modelo <code>Nota</code> que ya creamos en otros ejemplos e instanciarla a traves de una variable, en nuestro caso <code>$notaNueva</code>.</p>
<p>De esta manera, podremos aceder a los métodos y propiedades de la misma, por eso podemos utilizar <code>nombre</code> y <code>descripcion</code>.</p>
<p>Así mismo, la variable <code>$request</code> está formada por los mismos nombres de <code>input</code> que hemos puesto en el formulario de la plantilla, si os acordáis eran <code>name="nombre"</code> y <code>name="descripcion"</code>.</p>
<p>Finalmente usamos el método <code>save()</code> para guardar estos nuevos datos en la base de datos y retornamos a la página del formulario con el método <code>back()</code> añadiendo un mensaje con <code>with()</code>.</p>
<p>Pero ¿dónde va a salir este mensaje? -- lo tenemos que declarar en nuestra plantilla</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a><a href="#__codelineno-37-1"><span class="linenos" data-linenos="1 "></span></a>@if (session(&#39;mensaje&#39;))
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a><a href="#__codelineno-37-2"><span class="linenos" data-linenos="2 "></span></a>  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mensaje-nota-creada&quot;</span><span class="p">&gt;</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a><a href="#__codelineno-37-3"><span class="linenos" data-linenos="3 "></span></a>      {{ session(&#39;mensaje&#39;) }}
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a><a href="#__codelineno-37-4"><span class="linenos" data-linenos="4 "></span></a>  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a><a href="#__codelineno-37-5"><span class="linenos" data-linenos="5 "></span></a>@endif
</span></code></pre></div>
<h3 id="validaciones">Validaciones<a class="headerlink" href="#validaciones" title="Permanent link">&para;</a></h3>
<p>Laravel nos proporciona herramientas para poder validar los datos que el usuario introduce en los campos del formulario.</p>
<p>Además de poder hacerlo con la etiqueta <code>required</code> de HTML5, debemos validar los datos a través del Framework.</p>
<p>Para ello, necesitamos modificar varios elementos:</p>
<ul>
<li>En primer lugar, nuestro archivo <code>controller</code></li>
<li>En segundo lugar, nuestra <code>plantilla</code> que carga el formulario</li>
</ul>
<p>Empecemos con el controlador. A través del método <code>validate()</code> le decimos a Eloquent qué campos son requeridos para poder enviar el formulario. Utilizaremos para ello un array asociativo con el nombre del input y la palabra reservada <code>required</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><a href="#__codelineno-38-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><a href="#__codelineno-38-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a><a href="#__codelineno-38-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ PagesController.php</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4"></a><a href="#__codelineno-38-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5"></a><a href="#__codelineno-38-5"><span class="linenos" data-linenos="5 "></span></a><span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">validate</span><span class="p">([</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6"></a><a href="#__codelineno-38-6"><span class="linenos" data-linenos="6 "></span></a>  <span class="s1">&#39;nombre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7"></a><a href="#__codelineno-38-7"><span class="linenos" data-linenos="7 "></span></a>  <span class="s1">&#39;descripcion&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8"></a><a href="#__codelineno-38-8"><span class="linenos" data-linenos="8 "></span></a><span class="p">]);</span>
</span></code></pre></div>
<p>Seguidamente nos moveremos a la plantilla donde esté el formulario y a través de la directiva <code>@error</code> crearemos un bloque html con nuestro mensaje de error por cada uno de los inputs requeridos.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1"></a><a href="#__codelineno-39-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2"></a><a href="#__codelineno-39-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3"></a><a href="#__codelineno-39-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ notas.blade.php</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4"></a><a href="#__codelineno-39-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5"></a><a href="#__codelineno-39-5"><span class="linenos" data-linenos="5 "></span></a><span class="o">@</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">)</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6"></a><a href="#__codelineno-39-6"><span class="linenos" data-linenos="6 "></span></a>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;alert alert-danger&quot;</span><span class="o">&gt;</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7"></a><a href="#__codelineno-39-7"><span class="linenos" data-linenos="7 "></span></a>      <span class="nx">No</span> <span class="nx">olvides</span> <span class="nx">rellenar</span> <span class="nx">el</span> <span class="nx">nombre</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8"></a><a href="#__codelineno-39-8"><span class="linenos" data-linenos="8 "></span></a>    <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9"></a><a href="#__codelineno-39-9"><span class="linenos" data-linenos="9 "></span></a><span class="o">@</span><span class="nx">enderror</span>
</span></code></pre></div>
<p>Pero ¿qué pasa cuando ha habido un error y nos muestra el mensaje que hemos escrito? Si te fijas, los campos que habías rellenado perderán la información, pero con Laravel podemos persistirlos sin hacer que el usuario vuelva a introducirlos.</p>
<p>Para poder persistir los datos una vez enviados pero con algún error de campo requerido, utilizaremos la directiva <code>old()</code> como value del input dentro de nuestro formulario y le pasaremos el nombre del input declarado en la etiqueta <code>name</code>.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><a href="#__codelineno-40-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><a href="#__codelineno-40-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a><a href="#__codelineno-40-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// estamos en ▓▓▓ notas.blade.php</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a><a href="#__codelineno-40-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a><a href="#__codelineno-40-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="o">&lt;</span><span class="nx">input</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6"></a><a href="#__codelineno-40-6"><span class="linenos" data-linenos=" 6 "></span></a>  <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7"></a><a href="#__codelineno-40-7"><span class="linenos" data-linenos=" 7 "></span></a>  <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;nombre&quot;</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8"></a><a href="#__codelineno-40-8"><span class="linenos" data-linenos=" 8 "></span></a>  <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;{{ old(&#39;nombre&#39;) }}&quot;</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9"></a><a href="#__codelineno-40-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;form-control mb-2&quot;</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10"></a><a href="#__codelineno-40-10"><span class="linenos" data-linenos="10 "></span></a>  <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Nombre de la nota&quot;</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11"></a><a href="#__codelineno-40-11"><span class="linenos" data-linenos="11 "></span></a>  <span class="nx">autofocus</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12"></a><a href="#__codelineno-40-12"><span class="linenos" data-linenos="12 "></span></a><span class="o">&gt;</span>
</span></code></pre></div>
<h3 id="editando-registros">Editando registros<a class="headerlink" href="#editando-registros" title="Permanent link">&para;</a></h3>
<p>Después de tener campos en la base de datos, lo interesante sería poder editarlos a través de un formulario.</p>
<p>Laravel nos proporciona las herramientas necesarias para ello; veamos pues lo que necesitamos para poder realizar el cambio a través de la directiva <code>put()</code>.</p>
<p>Para poder hacer el cambio de resgistros necesitamos lo siguiente:</p>
<ul>
<li>Un enlace para redirigir a la página de editar, pasando el id del elemento en cuestión</li>
<li>Una nueva <code>ruta</code>que apunte a nuestra plantilla de editar</li>
<li>Una <code>plantilla</code> para poder editar con un formulario que reciba los datos a editar</li>
<li>Una nueva función dentro de nuestro <code>controlador</code> para poder manejar los datos ya introducidos</li>
<li>Una nueva <code>ruta</code> que utilice el método <code>put()</code> para poder actualizar los datos</li>
<li>Un nuevo método dentro de nuestro <code>controlador</code>para actualizar los datos nuevos introducidos</li>
</ul>
<p><div class="language-php highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><a href="#__codelineno-41-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><a href="#__codelineno-41-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a><a href="#__codelineno-41-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ notas.blade.php</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a><a href="#__codelineno-41-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5"></a><a href="#__codelineno-41-5"><span class="linenos" data-linenos="5 "></span></a><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;{{ route(&#39;notas.editar&#39;, </span><span class="si">$nota</span><span class="s2">) }}&quot;</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;btn btn-warning btn-sm&quot;</span><span class="o">&gt;</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6"></a><a href="#__codelineno-41-6"><span class="linenos" data-linenos="6 "></span></a>  <span class="nx">Editar</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7"></a><a href="#__codelineno-41-7"><span class="linenos" data-linenos="7 "></span></a><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span>
</span></code></pre></div>
Ahora creamos la ruta</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><a href="#__codelineno-42-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a><a href="#__codelineno-42-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a><a href="#__codelineno-42-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ wep.php</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a><a href="#__codelineno-42-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a><a href="#__codelineno-42-5"><span class="linenos" data-linenos="5 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;editar/{id}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;editar&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notas.editar&#39;</span><span class="p">);</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a><a href="#__codelineno-42-6"><span class="linenos" data-linenos="6 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">put</span><span class="p">(</span><span class="s1">&#39;editar/{id}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;actualizar&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notas.actualizar&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>Ahora necesitamos crear una nueva plantilla <code>resources/views/notas/editar.blade.php</code></p>
<p><div class="language-php highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1"></a><a href="#__codelineno-43-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2"></a><a href="#__codelineno-43-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3"></a><a href="#__codelineno-43-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// estamos en ▓▓▓ editar.blade.php</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4"></a><a href="#__codelineno-43-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;plantilla&#39;</span><span class="p">)</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5"></a><a href="#__codelineno-43-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6"></a><a href="#__codelineno-43-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;apartado&#39;</span><span class="p">)</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7"></a><a href="#__codelineno-43-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Editando</span> <span class="nx">la</span> <span class="nx">nota</span> <span class="p">{{</span> <span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">id</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h2</span><span class="o">&gt;</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8"></a><a href="#__codelineno-43-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9"></a><a href="#__codelineno-43-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="o">@</span><span class="k">if</span> <span class="p">(</span><span class="nx">session</span><span class="p">(</span><span class="s1">&#39;mensaje&#39;</span><span class="p">))</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10"></a><a href="#__codelineno-43-10"><span class="linenos" data-linenos="10 "></span></a>  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;alert alert-success&quot;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">session</span><span class="p">(</span><span class="s1">&#39;mensaje&#39;</span><span class="p">)}}</span><span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11"></a><a href="#__codelineno-43-11"><span class="linenos" data-linenos="11 "></span></a><span class="o">@</span><span class="k">endif</span>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12"></a><a href="#__codelineno-43-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13"></a><a href="#__codelineno-43-13"><span class="linenos" data-linenos="13 "></span></a><span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&quot;{{ route(&#39;notas.actualizar&#39;, </span><span class="si">$nota</span><span class="s2"> -&gt; id) }}&quot;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="o">&gt;</span>
</span><span id="__span-43-14"><a id="__codelineno-43-14" name="__codelineno-43-14"></a><a href="#__codelineno-43-14"><span class="linenos" data-linenos="14 "></span></a>  <span class="o">@</span><span class="nx">method</span><span class="p">(</span><span class="s1">&#39;PUT&#39;</span><span class="p">)</span> <span class="p">{{</span><span class="o">--</span> <span class="nx">Necesitamos</span> <span class="nx">cambiar</span> <span class="nx">al</span> <span class="nx">método</span> <span class="nx">PUT</span> <span class="nx">para</span> <span class="nx">editar</span> <span class="o">--</span><span class="p">}}</span>
</span><span id="__span-43-15"><a id="__codelineno-43-15" name="__codelineno-43-15"></a><a href="#__codelineno-43-15"><span class="linenos" data-linenos="15 "></span></a>  <span class="o">@</span><span class="nx">csrf</span> <span class="p">{{</span><span class="o">--</span> <span class="nx">Cláusula</span> <span class="nx">para</span> <span class="nx">obtener</span> <span class="nx">un</span> <span class="nx">token</span> <span class="nx">de</span> <span class="nx">formulario</span> <span class="nx">al</span> <span class="nx">enviarlo</span> <span class="o">--</span><span class="p">}}</span>
</span><span id="__span-43-16"><a id="__codelineno-43-16" name="__codelineno-43-16"></a><a href="#__codelineno-43-16"><span class="linenos" data-linenos="16 "></span></a>
</span><span id="__span-43-17"><a id="__codelineno-43-17" name="__codelineno-43-17"></a><a href="#__codelineno-43-17"><span class="linenos" data-linenos="17 "></span></a>  <span class="o">@</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">)</span>
</span><span id="__span-43-18"><a id="__codelineno-43-18" name="__codelineno-43-18"></a><a href="#__codelineno-43-18"><span class="linenos" data-linenos="18 "></span></a>      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;alert alert-danger&quot;</span><span class="o">&gt;</span>
</span><span id="__span-43-19"><a id="__codelineno-43-19" name="__codelineno-43-19"></a><a href="#__codelineno-43-19"><span class="linenos" data-linenos="19 "></span></a>          <span class="nx">El</span> <span class="nx">nombre</span> <span class="nx">es</span> <span class="nx">obligatorio</span>
</span><span id="__span-43-20"><a id="__codelineno-43-20" name="__codelineno-43-20"></a><a href="#__codelineno-43-20"><span class="linenos" data-linenos="20 "></span></a>      <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
</span><span id="__span-43-21"><a id="__codelineno-43-21" name="__codelineno-43-21"></a><a href="#__codelineno-43-21"><span class="linenos" data-linenos="21 "></span></a>  <span class="o">@</span><span class="nx">enderror</span>
</span><span id="__span-43-22"><a id="__codelineno-43-22" name="__codelineno-43-22"></a><a href="#__codelineno-43-22"><span class="linenos" data-linenos="22 "></span></a>  <span class="o">@</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;descripcion&#39;</span><span class="p">)</span>
</span><span id="__span-43-23"><a id="__codelineno-43-23" name="__codelineno-43-23"></a><a href="#__codelineno-43-23"><span class="linenos" data-linenos="23 "></span></a>      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;alert alert-danger&quot;</span><span class="o">&gt;</span>
</span><span id="__span-43-24"><a id="__codelineno-43-24" name="__codelineno-43-24"></a><a href="#__codelineno-43-24"><span class="linenos" data-linenos="24 "></span></a>          <span class="nx">La</span> <span class="nx">descripción</span> <span class="nx">es</span> <span class="nx">obligatoria</span>
</span><span id="__span-43-25"><a id="__codelineno-43-25" name="__codelineno-43-25"></a><a href="#__codelineno-43-25"><span class="linenos" data-linenos="25 "></span></a>      <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
</span><span id="__span-43-26"><a id="__codelineno-43-26" name="__codelineno-43-26"></a><a href="#__codelineno-43-26"><span class="linenos" data-linenos="26 "></span></a>  <span class="o">@</span><span class="nx">enderror</span>
</span><span id="__span-43-27"><a id="__codelineno-43-27" name="__codelineno-43-27"></a><a href="#__codelineno-43-27"><span class="linenos" data-linenos="27 "></span></a>
</span><span id="__span-43-28"><a id="__codelineno-43-28" name="__codelineno-43-28"></a><a href="#__codelineno-43-28"><span class="linenos" data-linenos="28 "></span></a>  <span class="o">&lt;</span><span class="nx">input</span>
</span><span id="__span-43-29"><a id="__codelineno-43-29" name="__codelineno-43-29"></a><a href="#__codelineno-43-29"><span class="linenos" data-linenos="29 "></span></a>      <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
</span><span id="__span-43-30"><a id="__codelineno-43-30" name="__codelineno-43-30"></a><a href="#__codelineno-43-30"><span class="linenos" data-linenos="30 "></span></a>      <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;nombre&quot;</span>
</span><span id="__span-43-31"><a id="__codelineno-43-31" name="__codelineno-43-31"></a><a href="#__codelineno-43-31"><span class="linenos" data-linenos="31 "></span></a>      <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;form-control mb-2&quot;</span>
</span><span id="__span-43-32"><a id="__codelineno-43-32" name="__codelineno-43-32"></a><a href="#__codelineno-43-32"><span class="linenos" data-linenos="32 "></span></a>      <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;{{ </span><span class="si">$nota</span><span class="s2"> -&gt; nombre }}&quot;</span>
</span><span id="__span-43-33"><a id="__codelineno-43-33" name="__codelineno-43-33"></a><a href="#__codelineno-43-33"><span class="linenos" data-linenos="33 "></span></a>      <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Nombre de la nota&quot;</span>
</span><span id="__span-43-34"><a id="__codelineno-43-34" name="__codelineno-43-34"></a><a href="#__codelineno-43-34"><span class="linenos" data-linenos="34 "></span></a>      <span class="nx">autofocus</span>
</span><span id="__span-43-35"><a id="__codelineno-43-35" name="__codelineno-43-35"></a><a href="#__codelineno-43-35"><span class="linenos" data-linenos="35 "></span></a>  <span class="o">&gt;</span>
</span><span id="__span-43-36"><a id="__codelineno-43-36" name="__codelineno-43-36"></a><a href="#__codelineno-43-36"><span class="linenos" data-linenos="36 "></span></a>  <span class="o">&lt;</span><span class="nx">input</span>
</span><span id="__span-43-37"><a id="__codelineno-43-37" name="__codelineno-43-37"></a><a href="#__codelineno-43-37"><span class="linenos" data-linenos="37 "></span></a>      <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
</span><span id="__span-43-38"><a id="__codelineno-43-38" name="__codelineno-43-38"></a><a href="#__codelineno-43-38"><span class="linenos" data-linenos="38 "></span></a>      <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;descripcion&quot;</span>
</span><span id="__span-43-39"><a id="__codelineno-43-39" name="__codelineno-43-39"></a><a href="#__codelineno-43-39"><span class="linenos" data-linenos="39 "></span></a>      <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Descripción de la nota&quot;</span>
</span><span id="__span-43-40"><a id="__codelineno-43-40" name="__codelineno-43-40"></a><a href="#__codelineno-43-40"><span class="linenos" data-linenos="40 "></span></a>      <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;form-control mb-2&quot;</span>
</span><span id="__span-43-41"><a id="__codelineno-43-41" name="__codelineno-43-41"></a><a href="#__codelineno-43-41"><span class="linenos" data-linenos="41 "></span></a>      <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;{{ </span><span class="si">$nota</span><span class="s2"> -&gt; descripcion }}&quot;</span>
</span><span id="__span-43-42"><a id="__codelineno-43-42" name="__codelineno-43-42"></a><a href="#__codelineno-43-42"><span class="linenos" data-linenos="42 "></span></a>  <span class="o">&gt;</span>
</span><span id="__span-43-43"><a id="__codelineno-43-43" name="__codelineno-43-43"></a><a href="#__codelineno-43-43"><span class="linenos" data-linenos="43 "></span></a>
</span><span id="__span-43-44"><a id="__codelineno-43-44" name="__codelineno-43-44"></a><a href="#__codelineno-43-44"><span class="linenos" data-linenos="44 "></span></a>  <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;btn btn-primary btn-block&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span><span class="o">&gt;</span><span class="nx">Guardar</span> <span class="nx">cambios</span><span class="o">&lt;/</span><span class="nx">button</span><span class="o">&gt;</span>
</span><span id="__span-43-45"><a id="__codelineno-43-45" name="__codelineno-43-45"></a><a href="#__codelineno-43-45"><span class="linenos" data-linenos="45 "></span></a><span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>
</span><span id="__span-43-46"><a id="__codelineno-43-46" name="__codelineno-43-46"></a><a href="#__codelineno-43-46"><span class="linenos" data-linenos="46 "></span></a><span class="o">@</span><span class="nx">endsection</span>
</span></code></pre></div>
Y por último, modificamos nuestro <code>PagesController</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1"></a><a href="#__codelineno-44-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2"></a><a href="#__codelineno-44-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3"></a><a href="#__codelineno-44-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// estamos en ▓▓▓ PagesController.php</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4"></a><a href="#__codelineno-44-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5"></a><a href="#__codelineno-44-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">editar</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6"></a><a href="#__codelineno-44-6"><span class="linenos" data-linenos=" 6 "></span></a>  <span class="nv">$nota</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7"></a><a href="#__codelineno-44-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8"></a><a href="#__codelineno-44-8"><span class="linenos" data-linenos=" 8 "></span></a>  <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;notas.editar&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;nota&#39;</span><span class="p">));</span>
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9"></a><a href="#__codelineno-44-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="p">}</span>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10"></a><a href="#__codelineno-44-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11"></a><a href="#__codelineno-44-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">actualizar</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12"></a><a href="#__codelineno-44-12"><span class="linenos" data-linenos="12 "></span></a>  <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">validate</span><span class="p">([</span>
</span><span id="__span-44-13"><a id="__codelineno-44-13" name="__codelineno-44-13"></a><a href="#__codelineno-44-13"><span class="linenos" data-linenos="13 "></span></a>      <span class="s1">&#39;nombre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
</span><span id="__span-44-14"><a id="__codelineno-44-14" name="__codelineno-44-14"></a><a href="#__codelineno-44-14"><span class="linenos" data-linenos="14 "></span></a>      <span class="s1">&#39;descripcion&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span>
</span><span id="__span-44-15"><a id="__codelineno-44-15" name="__codelineno-44-15"></a><a href="#__codelineno-44-15"><span class="linenos" data-linenos="15 "></span></a>  <span class="p">]);</span>
</span><span id="__span-44-16"><a id="__codelineno-44-16" name="__codelineno-44-16"></a><a href="#__codelineno-44-16"><span class="linenos" data-linenos="16 "></span></a>
</span><span id="__span-44-17"><a id="__codelineno-44-17" name="__codelineno-44-17"></a><a href="#__codelineno-44-17"><span class="linenos" data-linenos="17 "></span></a>  <span class="nv">$notaActualizar</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span><span id="__span-44-18"><a id="__codelineno-44-18" name="__codelineno-44-18"></a><a href="#__codelineno-44-18"><span class="linenos" data-linenos="18 "></span></a>
</span><span id="__span-44-19"><a id="__codelineno-44-19" name="__codelineno-44-19"></a><a href="#__codelineno-44-19"><span class="linenos" data-linenos="19 "></span></a>  <span class="nv">$notaActualizar</span> <span class="o">-&gt;</span> <span class="na">nombre</span> <span class="o">=</span> <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">nombre</span><span class="p">;</span>
</span><span id="__span-44-20"><a id="__codelineno-44-20" name="__codelineno-44-20"></a><a href="#__codelineno-44-20"><span class="linenos" data-linenos="20 "></span></a>  <span class="nv">$notaActualizar</span> <span class="o">-&gt;</span> <span class="na">descripcion</span> <span class="o">=</span> <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">descripcion</span><span class="p">;</span>
</span><span id="__span-44-21"><a id="__codelineno-44-21" name="__codelineno-44-21"></a><a href="#__codelineno-44-21"><span class="linenos" data-linenos="21 "></span></a>
</span><span id="__span-44-22"><a id="__codelineno-44-22" name="__codelineno-44-22"></a><a href="#__codelineno-44-22"><span class="linenos" data-linenos="22 "></span></a>  <span class="nv">$notaActualizar</span> <span class="o">-&gt;</span> <span class="na">save</span><span class="p">();</span>
</span><span id="__span-44-23"><a id="__codelineno-44-23" name="__codelineno-44-23"></a><a href="#__codelineno-44-23"><span class="linenos" data-linenos="23 "></span></a>
</span><span id="__span-44-24"><a id="__codelineno-44-24" name="__codelineno-44-24"></a><a href="#__codelineno-44-24"><span class="linenos" data-linenos="24 "></span></a>  <span class="k">return</span> <span class="nx">back</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="na">with</span><span class="p">(</span><span class="s1">&#39;mensaje&#39;</span><span class="p">,</span> <span class="s1">&#39;Nota actualizada&#39;</span><span class="p">);</span>
</span><span id="__span-44-25"><a id="__codelineno-44-25" name="__codelineno-44-25"></a><a href="#__codelineno-44-25"><span class="linenos" data-linenos="25 "></span></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="eliminando-registros">Eliminando registros<a class="headerlink" href="#eliminando-registros" title="Permanent link">&para;</a></h3>
<p>A la hora de eliminar un registro nuevo, no necesitamos crear una plantilla nueva ya que podemos mandar la instrucción directamente a través de otro formulario.</p>
<p>Por lo tanto, para eliminar un registro de la base de datos utilizaremos lo siguiente.</p>
<ul>
<li>Un formulario básico con un único botón de eliminar</li>
<li>Usaremos el método <code>DELETE</code> para sobreescribir el método del formulario HTML</li>
<li>Una <code>ruta</code> nueva para controlar el <code>action</code> de este nuevo formulario</li>
<li>Un nuevo método dentro de nuestro <code>Controlador</code> que lleve la lógica para borrar el registro</li>
</ul>
<p>Vamos a ver cómo meter ese formulario dentro de nuestro listado de notas</p>
<p><div class="language-php highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1"></a><a href="#__codelineno-45-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2"></a><a href="#__codelineno-45-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3"></a><a href="#__codelineno-45-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// estamos en ▓▓▓ notas.blade.php</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4"></a><a href="#__codelineno-45-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5"></a><a href="#__codelineno-45-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&quot;{{ route(&#39;notas.eliminar&#39;, </span><span class="si">$nota</span><span class="s2">) }}&quot;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;d-inline&quot;</span><span class="o">&gt;</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6"></a><a href="#__codelineno-45-6"><span class="linenos" data-linenos=" 6 "></span></a>  <span class="o">@</span><span class="nx">method</span><span class="p">(</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7"></a><a href="#__codelineno-45-7"><span class="linenos" data-linenos=" 7 "></span></a>  <span class="o">@</span><span class="nx">csrf</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8"></a><a href="#__codelineno-45-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9"></a><a href="#__codelineno-45-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;btn btn-danger btn-sm&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span><span class="o">&gt;</span><span class="nx">Eliminar</span><span class="o">&lt;/</span><span class="nx">button</span><span class="o">&gt;</span>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10"></a><a href="#__codelineno-45-10"><span class="linenos" data-linenos="10 "></span></a><span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>
</span></code></pre></div>
Ahora que ya tenemos montado el formulario en nuestra plantilla, pasemos a crear la ruta que hemos colocado en el <code>action</code>del formulario para borrar elementos.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1"></a><a href="#__codelineno-46-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2"></a><a href="#__codelineno-46-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3"></a><a href="#__codelineno-46-3"><span class="linenos" data-linenos="3 "></span></a><span class="c1">// estamos en ▓▓▓ web.php</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4"></a><a href="#__codelineno-46-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5"></a><a href="#__codelineno-46-5"><span class="linenos" data-linenos="5 "></span></a><span class="nx">Route</span><span class="o">::</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;eliminar/{id}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;eliminar&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notas.eliminar&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>El último paso que nos queda es modificar el <code>PagesController</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1"></a><a href="#__codelineno-47-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2"></a><a href="#__codelineno-47-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3"></a><a href="#__codelineno-47-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// estamos en ▓▓▓ PagesController.php</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4"></a><a href="#__codelineno-47-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5"></a><a href="#__codelineno-47-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">eliminar</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6"></a><a href="#__codelineno-47-6"><span class="linenos" data-linenos=" 6 "></span></a>  <span class="nv">$notaEliminar</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7"></a><a href="#__codelineno-47-7"><span class="linenos" data-linenos=" 7 "></span></a>  <span class="nv">$notaEliminar</span> <span class="o">-&gt;</span> <span class="na">delete</span><span class="p">();</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8"></a><a href="#__codelineno-47-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9"></a><a href="#__codelineno-47-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="k">return</span> <span class="nx">back</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="na">with</span><span class="p">(</span><span class="s1">&#39;mensaje&#39;</span><span class="p">,</span> <span class="s1">&#39;Nota Eliminada&#39;</span><span class="p">);</span>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10"></a><a href="#__codelineno-47-10"><span class="linenos" data-linenos="10 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Si todo ha salido bien, habremos creado un sitio en Laravel y Eloquent que es capaz de hacer un <strong><em>CRUD</em></strong> validando campos en formularios e insertando datos reales en una base de datos.</p>
<h2 id="paginacion">Paginación<a class="headerlink" href="#paginacion" title="Permanent link">&para;</a></h2>
<p>Para añadir paginación a nuestros resultados, Eloquent tiene un método que se llama <code>paginate()</code> donde le pasamos un número entero como parámetro para indicarle el número de resultados que queremos por página.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1"></a><a href="#__codelineno-48-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2"></a><a href="#__codelineno-48-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3"></a><a href="#__codelineno-48-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1">// estamos en ▓▓▓ PagesController.php</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4"></a><a href="#__codelineno-48-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5"></a><a href="#__codelineno-48-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">notas</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6"></a><a href="#__codelineno-48-6"><span class="linenos" data-linenos=" 6 "></span></a>  <span class="c1">// $notas = Nota::all();</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7"></a><a href="#__codelineno-48-7"><span class="linenos" data-linenos=" 7 "></span></a>  <span class="nv">$notas</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">paginate</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8"></a><a href="#__codelineno-48-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9"></a><a href="#__codelineno-48-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;notas&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;notas&#39;</span><span class="p">));</span>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10"></a><a href="#__codelineno-48-10"><span class="linenos" data-linenos="10 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Ahora veremos ciertos elementos HTML que se han generado en nuestra vista, ésto es porque Laravel hace uso de una librería de paginación situada en la carpeta <code>vendor/laravel/framework/src/illuminate/Pagination</code></p>
<p>Si os metéis en el directorio y abrís el archivo <code>tailwind.blade.php</code> veréis la estructura HTML que os sale en la vista. Podéis modificar este archivo a vuestro antojo, pero es recomendable guardarse una copia del mismo.</p>
<p>Existe otra dependencia en <code>resources/lang/en/pagination.php</code> donde encontrarás el idioma para la paginación.</p>
<h2 id="autenticacion">Autenticación<a class="headerlink" href="#autenticacion" title="Permanent link">&para;</a></h2>
<p>Para la utenticación de usuarios necesitamos instalar unas cuantas dependencias ya preparadas para ello.</p>
<p>No es necesarios crear un proyecto nuevo pero nosotros vamos a hacerlo para tener uno con autenticación y otro no, el que ya hicimos al principio.</p>
<p>Primero de todo, vamos a crear un nuevo proyecto en Laravel que se llame <code>notas_auth</code> y nos metemos dentro de la carpeta del mismo cuando el script haya terminado.</p>
<p>Dentro de la carpeta <code>notas_auth</code> lanzamos los siguientes comandos.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a><a href="#__codelineno-49-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">composer require laravel/ui</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a><a href="#__codelineno-49-2"><span class="linenos" data-linenos="2 "></span></a><span class="go">php artisan ui vue --auth</span>
</span></code></pre></div>
<p>Para terminar, lanzaremos el comando <code>migrate</code> que ya conocemos... <span class="alert"><strong>SI ESTÁS WINDOWS</strong></span> fuera de la imagen de Docker (utilizando xampp o parecidos) debes crear una nueva base de datos y posteriormente modificiar el archivo <code>.env</code> poniendo el nombre de esa base de datos que acabas de crear.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1"></a><a href="#__codelineno-50-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan migrate</span>
</span></code></pre></div>
<p>Si todo ha salido bien, podrás ver en la carpeta <code>resources/views</code> una carpeta que se llama <strong>auth</strong> y un controlador nuevo que llama <code>HomeController</code></p>
<h3 id="restringir-una-ruta">Restringir una ruta<a class="headerlink" href="#restringir-una-ruta" title="Permanent link">&para;</a></h3>
<p>Si nos fijamos, en el nuevo controlador que se ha creado <code>HomeController</code> podemos ver unas líneas al principio del archivo que son las que determinan si la ruta está restringida a usuarios registrados y logueados.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1"></a><a href="#__codelineno-51-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2"></a><a href="#__codelineno-51-2"><span class="linenos" data-linenos="2 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3"></a><a href="#__codelineno-51-3"><span class="linenos" data-linenos="3 "></span></a><span class="p">{</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4"></a><a href="#__codelineno-51-4"><span class="linenos" data-linenos="4 "></span></a>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;auth&#39;</span><span class="p">);</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5"></a><a href="#__codelineno-51-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Mediante el uso del <code>middleware</code> llamado <code>auth</code> establecemos que todas las rutas que hagan uso de este controlador deban pasar por el login para mostrar el contenido.</p>
<p>Por lo tanto, en nuestros proyectos es recomendable utilizar diferentes controladores para diferentes vistas; las que estén reestringidas por el login y las que no.</p>
<h3 id="datos-del-usuario">Datos del usuario<a class="headerlink" href="#datos-del-usuario" title="Permanent link">&para;</a></h3>
<p>Siempre que queramos acceder a cualquier dato del usuario logueado, utilizaremos el método <code>auth()</code> para sacar por pantalla la información o para utilizar lógica a la hora de guardar datos en la base de datos en función de un usuario, un email o el campo que sea.</p>
<p>Imaginemos que tenemos una ruta donde accedemos a dicha información</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1"></a><a href="#__codelineno-52-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2"></a><a href="#__codelineno-52-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3"></a><a href="#__codelineno-52-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">notas</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4"></a><a href="#__codelineno-52-4"><span class="linenos" data-linenos="4 "></span></a>  <span class="k">return</span> <span class="nx">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">();</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5"></a><a href="#__codelineno-52-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6"></a><a href="#__codelineno-52-6"><span class="linenos" data-linenos="6 "></span></a>  <span class="c1">// return auth()-&gt;user() -&gt; name;</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7"></a><a href="#__codelineno-52-7"><span class="linenos" data-linenos="7 "></span></a>  <span class="c1">// return auth()-&gt;user() -&gt; email;</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8"></a><a href="#__codelineno-52-8"><span class="linenos" data-linenos="8 "></span></a>  <span class="c1">// ...</span>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9"></a><a href="#__codelineno-52-9"><span class="linenos" data-linenos="9 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Si visitamos esta ruta con nuestro login y password, nos aparecerá por pantalla toda la información de nuestro <code>user</code> a excepción de la contraseña y, aunque así fuera porque se lo forzamos, ésta aparecerá encriptada.</p>
<h2 id="relaciones-con-eloquent">Relaciones con Eloquent<a class="headerlink" href="#relaciones-con-eloquent" title="Permanent link">&para;</a></h2>
<p>A través de Eloquent vamos a poder gestionar las relaciones entre nuestras tablas de la base de datos de una manera muy sencilla y sin sentencias SQL.</p>
<h3 id="uno-a-uno-1-a-1">Uno a uno (1 a 1)<a class="headerlink" href="#uno-a-uno-1-a-1" title="Permanent link">&para;</a></h3>
<p>Para crear este tipo de relaciones en Eloquent y Laravel, debemos tener creadas las tablas que vayamos a relacionar y establecer la relación entre ellas a través del método <code>hasOne</code>.</p>
<p>Supongamos que tenemos una tablas <code>usuario</code> que está relacionada con la tabla <code>telefono</code>.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a><a href="#__codelineno-53-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a><a href="#__codelineno-53-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a><a href="#__codelineno-53-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4"></a><a href="#__codelineno-53-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5"></a><a href="#__codelineno-53-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6"></a><a href="#__codelineno-53-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7"></a><a href="#__codelineno-53-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="k">class</span> <span class="nc">Usuario</span> <span class="k">extends</span> <span class="nx">Model</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8"></a><a href="#__codelineno-53-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">{</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9"></a><a href="#__codelineno-53-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="sd">/**</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10"></a><a href="#__codelineno-53-10"><span class="linenos" data-linenos="10 "></span></a><span class="sd">   * Obtener el Teléfono asocioado con el Usuario</span>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11"></a><a href="#__codelineno-53-11"><span class="linenos" data-linenos="11 "></span></a><span class="sd">   */</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12"></a><a href="#__codelineno-53-12"><span class="linenos" data-linenos="12 "></span></a>  <span class="k">public</span> <span class="k">function</span> <span class="nf">telefono</span><span class="p">()</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13"></a><a href="#__codelineno-53-13"><span class="linenos" data-linenos="13 "></span></a>  <span class="p">{</span>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14"></a><a href="#__codelineno-53-14"><span class="linenos" data-linenos="14 "></span></a>      <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">hasOne</span><span class="p">(</span><span class="nx">Telefono</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15"></a><a href="#__codelineno-53-15"><span class="linenos" data-linenos="15 "></span></a>  <span class="p">}</span>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16"></a><a href="#__codelineno-53-16"><span class="linenos" data-linenos="16 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Una vez hecho ésto, para poder recuperar el dato relacionado, debemos utilizar las propiedades dinámicas de Eloquent. Con estas propiedades dinámicas podremos obtener dicho dato.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a><a href="#__codelineno-54-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a><a href="#__codelineno-54-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3"></a><a href="#__codelineno-54-3"><span class="linenos" data-linenos="3 "></span></a><span class="nv">$telefono</span> <span class="o">=</span> <span class="nx">Usuario</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">telefono</span><span class="p">;</span>
</span></code></pre></div>
<p>En este caso, Eloquent asume que en <code>Usuario</code> existe la clave ajena <code>usuario_id</code> pero ¿qué pasa si tenemos otro nombre? pues se lo pasamos como parámetro.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1"></a><a href="#__codelineno-55-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2"></a><a href="#__codelineno-55-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3"></a><a href="#__codelineno-55-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasOne</span><span class="p">(</span><span class="nx">Telefono</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;clave_ajena&#39;</span><span class="p">);</span>
</span></code></pre></div>
<h3 id="uno-a-uno-inversa">Uno a Uno <strong><em>INVERSA</em></strong><a class="headerlink" href="#uno-a-uno-inversa" title="Permanent link">&para;</a></h3>
<p>Ahora que podemos acceder al modelo teléfono desde el modelo usuario, vamos a ver cómo hacerlo de manera inversa, es decir, cómo acceder desde el módelo <code>usuario</code> desdel el modelo <code>telefono</code> gracias al método <code>belongsTo()</code>.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1"></a><a href="#__codelineno-56-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2"></a><a href="#__codelineno-56-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3"></a><a href="#__codelineno-56-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4"></a><a href="#__codelineno-56-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5"></a><a href="#__codelineno-56-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6"></a><a href="#__codelineno-56-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7"></a><a href="#__codelineno-56-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="k">class</span> <span class="nc">Telefono</span> <span class="k">extends</span> <span class="nx">Model</span>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8"></a><a href="#__codelineno-56-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">{</span>
</span><span id="__span-56-9"><a id="__codelineno-56-9" name="__codelineno-56-9"></a><a href="#__codelineno-56-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="k">public</span> <span class="k">function</span> <span class="nf">usuario</span><span class="p">()</span>
</span><span id="__span-56-10"><a id="__codelineno-56-10" name="__codelineno-56-10"></a><a href="#__codelineno-56-10"><span class="linenos" data-linenos="10 "></span></a>  <span class="p">{</span>
</span><span id="__span-56-11"><a id="__codelineno-56-11" name="__codelineno-56-11"></a><a href="#__codelineno-56-11"><span class="linenos" data-linenos="11 "></span></a>      <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsTo</span><span class="p">(</span><span class="nx">Usuario</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-56-12"><a id="__codelineno-56-12" name="__codelineno-56-12"></a><a href="#__codelineno-56-12"><span class="linenos" data-linenos="12 "></span></a>  <span class="p">}</span>
</span><span id="__span-56-13"><a id="__codelineno-56-13" name="__codelineno-56-13"></a><a href="#__codelineno-56-13"><span class="linenos" data-linenos="13 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Al llamar el método de <code>usuario</code>, Eloquent intentará encontrar un modelo de usuario que tenga un <code>id</code> que coincida con la columna de <code>usuario_id</code> en el modelo de <code>telefono</code>.</p>
<p>Eloquent determina el nombre de la clave externa examinando el nombre del método de relación y agregando el sufijo <code>_id</code> al nombre del método. Entonces, asume que el modelo <code>Telefono</code> tiene una columna <code>usuario_id</code>. Sin embargo, si no se llama de esa manera, puedes pasarle como argumento el nombre de la clave.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1"></a><a href="#__codelineno-57-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2"></a><a href="#__codelineno-57-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3"></a><a href="#__codelineno-57-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">usuario</span><span class="p">()</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4"></a><a href="#__codelineno-57-4"><span class="linenos" data-linenos="4 "></span></a><span class="p">{</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5"></a><a href="#__codelineno-57-5"><span class="linenos" data-linenos="5 "></span></a>    <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsTo</span><span class="p">(</span><span class="nx">Usuario</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;clave_ajena&#39;</span><span class="p">);</span>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6"></a><a href="#__codelineno-57-6"><span class="linenos" data-linenos="6 "></span></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="uno-a-muchos-1-a-mm">Uno a Muchos (1 a MM)<a class="headerlink" href="#uno-a-muchos-1-a-mm" title="Permanent link">&para;</a></h3>
<p>En este caso, las relaciones de 1 a muchos podemos decir que en una entrada de un blog, o en un post de Facebook, hay muchos comentarios relacionados a esa misma publicación.</p>
<p>Para empezar, ya sabemos que debemos crear el modelo y en este caso usaremos el método <code>hasMany()</code> para obtener los datos relacionados con ese post o entrada en el blog</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1"></a><a href="#__codelineno-58-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2"></a><a href="#__codelineno-58-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3"></a><a href="#__codelineno-58-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4"></a><a href="#__codelineno-58-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5"></a><a href="#__codelineno-58-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6"></a><a href="#__codelineno-58-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7"></a><a href="#__codelineno-58-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="k">class</span> <span class="nc">Post</span> <span class="k">extends</span> <span class="nx">Model</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8"></a><a href="#__codelineno-58-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">{</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9"></a><a href="#__codelineno-58-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10"></a><a href="#__codelineno-58-10"><span class="linenos" data-linenos="10 "></span></a>  <span class="k">public</span> <span class="k">function</span> <span class="nf">comentarios</span><span class="p">()</span>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11"></a><a href="#__codelineno-58-11"><span class="linenos" data-linenos="11 "></span></a>  <span class="p">{</span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12"></a><a href="#__codelineno-58-12"><span class="linenos" data-linenos="12 "></span></a>      <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">hasMany</span><span class="p">(</span><span class="nx">Comentario</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13"></a><a href="#__codelineno-58-13"><span class="linenos" data-linenos="13 "></span></a>  <span class="p">}</span>
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14"></a><a href="#__codelineno-58-14"><span class="linenos" data-linenos="14 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Cuidado con las claves ajenas, que aquí pasa lo mismo... Eloquent establece por defecto el sufijo <code>_id</code> por lo tanto, en este ejemplo buscaría por <code>post_id</code>. Si no queremos éso o nuestra clave ajena tiene otro nombre, se lo pasamos por parámetro en el método <code>hasMany</code> como hacíamos más arriba.</p>
<p>Ahora, al haber más de un dato, necesitamos iterar, por tanto debemos crear un bucle para poder sacar cada dato.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1"></a><a href="#__codelineno-59-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2"></a><a href="#__codelineno-59-2"><span class="linenos" data-linenos="2 "></span></a><span class="k">use</span> <span class="nx">App\Models\Post</span><span class="p">;</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3"></a><a href="#__codelineno-59-3"><span class="linenos" data-linenos="3 "></span></a>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4"></a><a href="#__codelineno-59-4"><span class="linenos" data-linenos="4 "></span></a><span class="nv">$comentarios</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">comentarios</span><span class="p">;</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5"></a><a href="#__codelineno-59-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6"></a><a href="#__codelineno-59-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">foreach</span> <span class="p">(</span><span class="nv">$comentarios</span> <span class="k">as</span> <span class="nv">$comentario</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7"></a><a href="#__codelineno-59-7"><span class="linenos" data-linenos="7 "></span></a>    <span class="c1">// Lo que sea que hagamos con esos datos</span>
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8"></a><a href="#__codelineno-59-8"><span class="linenos" data-linenos="8 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Además, como todas las relaciones son sentencias SQL, podemos anidar varios filtros en función de lo que queramos sacar.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1"></a><a href="#__codelineno-60-1"><span class="linenos" data-linenos="1 "></span></a><span class="nv">$comentario</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">comentarios</span><span class="p">()</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2"></a><a href="#__codelineno-60-2"><span class="linenos" data-linenos="2 "></span></a>    <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;titulo&#39;</span><span class="p">,</span> <span class="s1">&#39;lo que sea&#39;</span><span class="p">)</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3"></a><a href="#__codelineno-60-3"><span class="linenos" data-linenos="3 "></span></a>    <span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>
</span></code></pre></div>
<h3 id="uno-a-muchos-inversa">Uno a Muchos <strong><em>INVERSA</em></strong><a class="headerlink" href="#uno-a-muchos-inversa" title="Permanent link">&para;</a></h3>
<p>Ahora que podemos acceder a todos los comentarios de una publicación, definamos una relación para permitir que un comentario acceda a su publicación principal.</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1"></a><a href="#__codelineno-61-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2"></a><a href="#__codelineno-61-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3"></a><a href="#__codelineno-61-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4"></a><a href="#__codelineno-61-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5"></a><a href="#__codelineno-61-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6"></a><a href="#__codelineno-61-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7"></a><a href="#__codelineno-61-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="k">class</span> <span class="nc">Comentario</span> <span class="k">extends</span> <span class="nx">Model</span>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8"></a><a href="#__codelineno-61-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">{</span>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9"></a><a href="#__codelineno-61-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10"></a><a href="#__codelineno-61-10"><span class="linenos" data-linenos="10 "></span></a>  <span class="k">public</span> <span class="k">function</span> <span class="nf">post</span><span class="p">()</span>
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11"></a><a href="#__codelineno-61-11"><span class="linenos" data-linenos="11 "></span></a>  <span class="p">{</span>
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12"></a><a href="#__codelineno-61-12"><span class="linenos" data-linenos="12 "></span></a>      <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsTo</span><span class="p">(</span><span class="nx">Post</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-61-13"><a id="__codelineno-61-13" name="__codelineno-61-13"></a><a href="#__codelineno-61-13"><span class="linenos" data-linenos="13 "></span></a>  <span class="p">}</span>
</span><span id="__span-61-14"><a id="__codelineno-61-14" name="__codelineno-61-14"></a><a href="#__codelineno-61-14"><span class="linenos" data-linenos="14 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Y ahora, a través de la propiedad de relación dinámica...</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1"></a><a href="#__codelineno-62-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2"></a><a href="#__codelineno-62-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3"></a><a href="#__codelineno-62-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">use</span> <span class="nx">App\Models\Comentario</span><span class="p">;</span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4"></a><a href="#__codelineno-62-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5"></a><a href="#__codelineno-62-5"><span class="linenos" data-linenos="5 "></span></a><span class="nv">$comentario</span> <span class="o">=</span> <span class="nx">Comentario</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6"></a><a href="#__codelineno-62-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-62-7"><a id="__codelineno-62-7" name="__codelineno-62-7"></a><a href="#__codelineno-62-7"><span class="linenos" data-linenos="7 "></span></a><span class="k">return</span> <span class="nv">$comentario</span> <span class="o">-&gt;</span> <span class="na">post</span> <span class="o">-&gt;</span> <span class="na">titulo</span><span class="p">;</span>
</span></code></pre></div>
<p>Pasaría lo mismo con el nombre de la clave ajena, si no se llama de la misma manera que Eloquent establece con el sufijo <code>_id</code> podemos pasarle como parámetro el nombre de la clave donde debe buscar.</p>
<h3 id="muchos-a-muchos-mm-a-mm">Muchos a Muchos (MM a MM)<a class="headerlink" href="#muchos-a-muchos-mm-a-mm" title="Permanent link">&para;</a></h3>
<p>Este tipo de relaciones son las más complicadas ya que, en un Blog del estilo Wordpress por ejemplo, un usuario puede tener muchos roles (lector, autor, administrador) pero un rol pueden tenerlo varios usuarios, es decir, puede haber muchos usuarios administradores, otros lectores y demás.</p>
<p>Para realizar este tipo de relaciones necesitaríamos 3 tablas diferentes.</p>
<ul>
<li>usuarios [ id, nombre]</li>
<li>roles [id, nombre]</li>
<li>rol_usuario [usuario_id, rol_id] (Tabla Pivote)</li>
</ul>
<p>Lo primero de todo, vamos a crear las tablas con sus modelos <span class="alert"><strong><em>a excepción de la tabla pivote rol_usuario</em></strong></span> que <span class="warning"><strong><em>sólo crearemos la tabla, sin su modelo</em></strong></span></p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1"></a><a href="#__codelineno-63-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan make:migration create_rol_usuario_table --create=rol_usuario</span>
</span></code></pre></div>
<p>Y la estructura de dicha seria de la siguiente manera...</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1"></a><a href="#__codelineno-64-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2"></a><a href="#__codelineno-64-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3"></a><a href="#__codelineno-64-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4"></a><a href="#__codelineno-64-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="p">{</span>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5"></a><a href="#__codelineno-64-5"><span class="linenos" data-linenos=" 5 "></span></a>    <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;rol_usuario&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6"></a><a href="#__codelineno-64-6"><span class="linenos" data-linenos=" 6 "></span></a>        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">bigIncrements</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7"></a><a href="#__codelineno-64-7"><span class="linenos" data-linenos=" 7 "></span></a>        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">unsignedInteger</span><span class="p">(</span><span class="s1">&#39;usuario_id&#39;</span><span class="p">);</span>
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8"></a><a href="#__codelineno-64-8"><span class="linenos" data-linenos=" 8 "></span></a>        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">unsignedInteger</span><span class="p">(</span><span class="s1">&#39;rol_id&#39;</span><span class="p">);</span>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9"></a><a href="#__codelineno-64-9"><span class="linenos" data-linenos=" 9 "></span></a>        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10"></a><a href="#__codelineno-64-10"><span class="linenos" data-linenos="10 "></span></a>    <span class="p">});</span>
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11"></a><a href="#__codelineno-64-11"><span class="linenos" data-linenos="11 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Ahora que ya tenemos todo listo, las relaciones de Muchos a Muchos vienen definidas por un método que devuelve el resultado de usar el método <code>belongsToMany()</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1"></a><a href="#__codelineno-65-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2"></a><a href="#__codelineno-65-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3"></a><a href="#__codelineno-65-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4"></a><a href="#__codelineno-65-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5"></a><a href="#__codelineno-65-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6"></a><a href="#__codelineno-65-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7"></a><a href="#__codelineno-65-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="k">class</span> <span class="nc">Usuario</span> <span class="k">extends</span> <span class="nx">Model</span>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8"></a><a href="#__codelineno-65-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">{</span>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9"></a><a href="#__codelineno-65-9"><span class="linenos" data-linenos=" 9 "></span></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">roles</span><span class="p">()</span>
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10"></a><a href="#__codelineno-65-10"><span class="linenos" data-linenos="10 "></span></a>    <span class="p">{</span>
</span><span id="__span-65-11"><a id="__codelineno-65-11" name="__codelineno-65-11"></a><a href="#__codelineno-65-11"><span class="linenos" data-linenos="11 "></span></a>        <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsToMany</span><span class="p">(</span><span class="nx">Rol</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-65-12"><a id="__codelineno-65-12" name="__codelineno-65-12"></a><a href="#__codelineno-65-12"><span class="linenos" data-linenos="12 "></span></a>    <span class="p">}</span>
</span><span id="__span-65-13"><a id="__codelineno-65-13" name="__codelineno-65-13"></a><a href="#__codelineno-65-13"><span class="linenos" data-linenos="13 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Una vez que tengamos las relaciones definidas, accederemos a ellas mediante las propiedades dinámicas de <code>rol</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1"></a><a href="#__codelineno-66-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2"></a><a href="#__codelineno-66-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3"></a><a href="#__codelineno-66-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">use</span> <span class="nx">App\Models\Usuario</span><span class="p">;</span>
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4"></a><a href="#__codelineno-66-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-66-5"><a id="__codelineno-66-5" name="__codelineno-66-5"></a><a href="#__codelineno-66-5"><span class="linenos" data-linenos="5 "></span></a><span class="nv">$usuario</span> <span class="o">=</span> <span class="nx">Usuario</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-66-6"><a id="__codelineno-66-6" name="__codelineno-66-6"></a><a href="#__codelineno-66-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-66-7"><a id="__codelineno-66-7" name="__codelineno-66-7"></a><a href="#__codelineno-66-7"><span class="linenos" data-linenos="7 "></span></a><span class="k">foreach</span> <span class="p">(</span><span class="nv">$usuario</span> <span class="o">-&gt;</span> <span class="na">roles</span> <span class="k">as</span> <span class="nv">$rol</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-66-8"><a id="__codelineno-66-8" name="__codelineno-66-8"></a><a href="#__codelineno-66-8"><span class="linenos" data-linenos="8 "></span></a>    <span class="c1">// nuestro código</span>
</span><span id="__span-66-9"><a id="__codelineno-66-9" name="__codelineno-66-9"></a><a href="#__codelineno-66-9"><span class="linenos" data-linenos="9 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Acordaros que podemos encadenar comandos sql a través de los métodos de Eloquent</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1"></a><a href="#__codelineno-67-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2"></a><a href="#__codelineno-67-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3"></a><a href="#__codelineno-67-3"><span class="linenos" data-linenos="3 "></span></a><span class="nv">$roles</span> <span class="o">=</span> <span class="nx">Usuario</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">roles</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="na">orderBy</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">get</span><span class="p">();</span>
</span></code></pre></div>
<h3 id="muchos-a-muchos-inversa">Muchos a Muchos <strong><em>INVERSA</em></strong><a class="headerlink" href="#muchos-a-muchos-inversa" title="Permanent link">&para;</a></h3>
<p>Para definir el "inverso" de una relación de muchos a muchos, debemos establecer un método en el modelo relacionado que también devuelva el resultado del método <code>belongsToMany</code>. Según el ejemplo que estamos siguiendo...</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1"></a><a href="#__codelineno-68-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2"></a><a href="#__codelineno-68-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3"></a><a href="#__codelineno-68-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4"></a><a href="#__codelineno-68-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5"></a><a href="#__codelineno-68-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
</span><span id="__span-68-6"><a id="__codelineno-68-6" name="__codelineno-68-6"></a><a href="#__codelineno-68-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-68-7"><a id="__codelineno-68-7" name="__codelineno-68-7"></a><a href="#__codelineno-68-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="k">class</span> <span class="nc">Rol</span> <span class="k">extends</span> <span class="nx">Model</span>
</span><span id="__span-68-8"><a id="__codelineno-68-8" name="__codelineno-68-8"></a><a href="#__codelineno-68-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">{</span>
</span><span id="__span-68-9"><a id="__codelineno-68-9" name="__codelineno-68-9"></a><a href="#__codelineno-68-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="k">public</span> <span class="k">function</span> <span class="nf">usuarios</span><span class="p">()</span>
</span><span id="__span-68-10"><a id="__codelineno-68-10" name="__codelineno-68-10"></a><a href="#__codelineno-68-10"><span class="linenos" data-linenos="10 "></span></a>  <span class="p">{</span>
</span><span id="__span-68-11"><a id="__codelineno-68-11" name="__codelineno-68-11"></a><a href="#__codelineno-68-11"><span class="linenos" data-linenos="11 "></span></a>      <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsToMany</span><span class="p">(</span><span class="nx">Usuario</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-68-12"><a id="__codelineno-68-12" name="__codelineno-68-12"></a><a href="#__codelineno-68-12"><span class="linenos" data-linenos="12 "></span></a>  <span class="p">}</span>
</span><span id="__span-68-13"><a id="__codelineno-68-13" name="__codelineno-68-13"></a><a href="#__codelineno-68-13"><span class="linenos" data-linenos="13 "></span></a><span class="p">}</span>
</span></code></pre></div>
<p>Vamos a hacer un ejemplo con una APP que gestiones alumnos y asignaturas, de tal manera que MUCHOS ALUMNOS pueden cursar MUCHAS ASIGNATURAS</p>
<p>¿Qué necesitamos para este ejemplo?</p>
<ul>
<li>
<p>3 migraciones para crear las tablas</p>
<ul>
<li><code>Alumnos</code> /// <code>Materias</code> /// <code>AlumnoMateria</code></li>
</ul>
</li>
<li>
<p>Modificar los archivos de las migraciones <code>create_alumnos_table</code> y <code>create_materias_table</code>.</p>
</li>
<li>Crear la base de datos <code>muchos_a_muchos</code></li>
<li>Ejecutar las Migraciones</li>
<li>2 <strong>modelos</strong> para <code>Alumnos</code> /// <code>Materias</code></li>
<li>Método dentro de <code>Alumno</code> para crear la relación Alumno -&gt; Materia</li>
<li>Crear el controlador para la vista</li>
<li>Crear la ruta de nuestra vista</li>
<li>Rellenar la base de datos</li>
<li>Crear la vista con los datos</li>
</ul>
<p><span class="success"><strong>3 MIGRACIONES</strong></span>
<div class="language-console highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1"></a><a href="#__codelineno-69-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan make:migration create_alumnos_table</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2"></a><a href="#__codelineno-69-2"><span class="linenos" data-linenos="2 "></span></a><span class="go">php artisan make:migration create_materias_table</span>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3"></a><a href="#__codelineno-69-3"><span class="linenos" data-linenos="3 "></span></a><span class="go">php artisan make:migration create_alumno_materia_table</span>
</span></code></pre></div></p>
<p><span class="success"><strong>MODIFICANDO LAS MIGRACIONES</strong></span></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">create_alumnos_table.php</label><label for="__tabbed_1_2">create_materias_table.php</label><label for="__tabbed_1_3">create_alumno_materia_table.php</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-php highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1"></a><a href="#__codelineno-70-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2"></a><a href="#__codelineno-70-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3"></a><a href="#__codelineno-70-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4"></a><a href="#__codelineno-70-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="p">{</span>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5"></a><a href="#__codelineno-70-5"><span class="linenos" data-linenos=" 5 "></span></a>  <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;alumnos&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6"></a><a href="#__codelineno-70-6"><span class="linenos" data-linenos=" 6 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7"></a><a href="#__codelineno-70-7"><span class="linenos" data-linenos=" 7 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">);</span>
</span><span id="__span-70-8"><a id="__codelineno-70-8" name="__codelineno-70-8"></a><a href="#__codelineno-70-8"><span class="linenos" data-linenos=" 8 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
</span><span id="__span-70-9"><a id="__codelineno-70-9" name="__codelineno-70-9"></a><a href="#__codelineno-70-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="p">});</span>
</span><span id="__span-70-10"><a id="__codelineno-70-10" name="__codelineno-70-10"></a><a href="#__codelineno-70-10"><span class="linenos" data-linenos="10 "></span></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-php highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1"></a><a href="#__codelineno-71-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2"></a><a href="#__codelineno-71-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3"></a><a href="#__codelineno-71-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4"></a><a href="#__codelineno-71-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="p">{</span>
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5"></a><a href="#__codelineno-71-5"><span class="linenos" data-linenos=" 5 "></span></a>  <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;materias&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-71-6"><a id="__codelineno-71-6" name="__codelineno-71-6"></a><a href="#__codelineno-71-6"><span class="linenos" data-linenos=" 6 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
</span><span id="__span-71-7"><a id="__codelineno-71-7" name="__codelineno-71-7"></a><a href="#__codelineno-71-7"><span class="linenos" data-linenos=" 7 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">);</span>
</span><span id="__span-71-8"><a id="__codelineno-71-8" name="__codelineno-71-8"></a><a href="#__codelineno-71-8"><span class="linenos" data-linenos=" 8 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
</span><span id="__span-71-9"><a id="__codelineno-71-9" name="__codelineno-71-9"></a><a href="#__codelineno-71-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="p">});</span>
</span><span id="__span-71-10"><a id="__codelineno-71-10" name="__codelineno-71-10"></a><a href="#__codelineno-71-10"><span class="linenos" data-linenos="10 "></span></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-php highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1"></a><a href="#__codelineno-72-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2"></a><a href="#__codelineno-72-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3"></a><a href="#__codelineno-72-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4"></a><a href="#__codelineno-72-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="p">{</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5"></a><a href="#__codelineno-72-5"><span class="linenos" data-linenos=" 5 "></span></a>  <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;alumno_materia&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-72-6"><a id="__codelineno-72-6" name="__codelineno-72-6"></a><a href="#__codelineno-72-6"><span class="linenos" data-linenos=" 6 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
</span><span id="__span-72-7"><a id="__codelineno-72-7" name="__codelineno-72-7"></a><a href="#__codelineno-72-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-72-8"><a id="__codelineno-72-8" name="__codelineno-72-8"></a><a href="#__codelineno-72-8"><span class="linenos" data-linenos=" 8 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">foreignId</span><span class="p">(</span><span class="s1">&#39;alumno_id&#39;</span><span class="p">)</span>
</span><span id="__span-72-9"><a id="__codelineno-72-9" name="__codelineno-72-9"></a><a href="#__codelineno-72-9"><span class="linenos" data-linenos=" 9 "></span></a>      <span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span>
</span><span id="__span-72-10"><a id="__codelineno-72-10" name="__codelineno-72-10"></a><a href="#__codelineno-72-10"><span class="linenos" data-linenos="10 "></span></a>      <span class="o">-&gt;</span><span class="na">constrained</span><span class="p">(</span><span class="s1">&#39;alumnos&#39;</span><span class="p">)</span>
</span><span id="__span-72-11"><a id="__codelineno-72-11" name="__codelineno-72-11"></a><a href="#__codelineno-72-11"><span class="linenos" data-linenos="11 "></span></a>      <span class="o">-&gt;</span><span class="na">cascadeOnUpdate</span><span class="p">()</span>
</span><span id="__span-72-12"><a id="__codelineno-72-12" name="__codelineno-72-12"></a><a href="#__codelineno-72-12"><span class="linenos" data-linenos="12 "></span></a>      <span class="o">-&gt;</span><span class="na">nullOnDelete</span><span class="p">();</span>
</span><span id="__span-72-13"><a id="__codelineno-72-13" name="__codelineno-72-13"></a><a href="#__codelineno-72-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-72-14"><a id="__codelineno-72-14" name="__codelineno-72-14"></a><a href="#__codelineno-72-14"><span class="linenos" data-linenos="14 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">foreignId</span><span class="p">(</span><span class="s1">&#39;materia_id&#39;</span><span class="p">)</span>
</span><span id="__span-72-15"><a id="__codelineno-72-15" name="__codelineno-72-15"></a><a href="#__codelineno-72-15"><span class="linenos" data-linenos="15 "></span></a>      <span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span>
</span><span id="__span-72-16"><a id="__codelineno-72-16" name="__codelineno-72-16"></a><a href="#__codelineno-72-16"><span class="linenos" data-linenos="16 "></span></a>      <span class="o">-&gt;</span><span class="na">constrained</span><span class="p">(</span><span class="s1">&#39;materias&#39;</span><span class="p">)</span>
</span><span id="__span-72-17"><a id="__codelineno-72-17" name="__codelineno-72-17"></a><a href="#__codelineno-72-17"><span class="linenos" data-linenos="17 "></span></a>      <span class="o">-&gt;</span><span class="na">cascadeOnUpdate</span><span class="p">()</span>
</span><span id="__span-72-18"><a id="__codelineno-72-18" name="__codelineno-72-18"></a><a href="#__codelineno-72-18"><span class="linenos" data-linenos="18 "></span></a>      <span class="o">-&gt;</span><span class="na">nullOnDelete</span><span class="p">();</span>
</span><span id="__span-72-19"><a id="__codelineno-72-19" name="__codelineno-72-19"></a><a href="#__codelineno-72-19"><span class="linenos" data-linenos="19 "></span></a>
</span><span id="__span-72-20"><a id="__codelineno-72-20" name="__codelineno-72-20"></a><a href="#__codelineno-72-20"><span class="linenos" data-linenos="20 "></span></a>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
</span><span id="__span-72-21"><a id="__codelineno-72-21" name="__codelineno-72-21"></a><a href="#__codelineno-72-21"><span class="linenos" data-linenos="21 "></span></a>  <span class="p">});</span>
</span><span id="__span-72-22"><a id="__codelineno-72-22" name="__codelineno-72-22"></a><a href="#__codelineno-72-22"><span class="linenos" data-linenos="22 "></span></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p><span class="success"><strong>CREAMOS LA BASE DE DATOS</strong></span></p>
<p>Para este ejemplo, vamos a crear una base de datos que se llame <code>muchos_a_muchos</code> desde la consola de MySQL o MariaDB.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1"></a><a href="#__codelineno-73-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">CREATE TABLE `muchos_a_muchos`</span>
</span></code></pre></div>
<p><span class="success"><strong>EJECUTANDO LAS MIGRACIONES</strong></span></p>
<p>Ya tenemos las migraciones creadas y la base de datos lista para insertar el contenido de las migraciones que hemos escrito más arriba, lo que nos queda es <code>ejecutar las migraciones</code> para volcar toda la estructura en nuestra nueva base de datos.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1"></a><a href="#__codelineno-74-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan migrate</span>
</span></code></pre></div>
<p><span class="success"><strong>2 MODELOS PARA ALUMNOS Y MATERIAS</strong></span></p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1"></a><a href="#__codelineno-75-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan make:model Alumno</span>
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2"></a><a href="#__codelineno-75-2"><span class="linenos" data-linenos="2 "></span></a><span class="go">php artisan make:model Materia</span>
</span></code></pre></div>
<p><span class="success"><strong>MÉTODOS PARA CREAR LAS RELACIONES ALUMNO &lt;-&gt; MATERIA</strong></span></p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Alumno.php</label><label for="__tabbed_2_2">Materia.php</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-php highlight"><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1"></a><a href="#__codelineno-76-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2"></a><a href="#__codelineno-76-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-76-3"><a id="__codelineno-76-3" name="__codelineno-76-3"></a><a href="#__codelineno-76-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">materias</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-76-4"><a id="__codelineno-76-4" name="__codelineno-76-4"></a><a href="#__codelineno-76-4"><span class="linenos" data-linenos="4 "></span></a>  <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsToMany</span><span class="p">(</span><span class="nx">Materia</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;alumno_materia&#39;</span><span class="p">);</span>
</span><span id="__span-76-5"><a id="__codelineno-76-5" name="__codelineno-76-5"></a><a href="#__codelineno-76-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-php highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1"></a><a href="#__codelineno-77-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2"></a><a href="#__codelineno-77-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3"></a><a href="#__codelineno-77-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">public</span> <span class="k">function</span> <span class="nf">alumnos</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4"></a><a href="#__codelineno-77-4"><span class="linenos" data-linenos="4 "></span></a>  <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsToMany</span><span class="p">(</span><span class="nx">Alumno</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;alumno_materia&#39;</span><span class="p">);</span>
</span><span id="__span-77-5"><a id="__codelineno-77-5" name="__codelineno-77-5"></a><a href="#__codelineno-77-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p><span class="success"><strong>CREANDO EL CONTROLADOR DE LA VISTA</strong></span></p>
<p>Necesitamos un controlador para redireccionar las rutas a las vistas que nosotros queramos, para ello crearemos el controlador <code>RelacionController</code></p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1"></a><a href="#__codelineno-78-1"><span class="linenos" data-linenos="1 "></span></a><span class="go">php artisan make:controller RelacionController</span>
</span></code></pre></div>
<p><span class="success"><strong>CREANDO RUTAS</strong></span></p>
<p>Ahora que ya tenemos nuestro controlador, vamos a crear una única vista para mostrar el ejemplo de la relación MUCHOS a MUCHOS, en este caso un alumno determinado.</p>
<p>Además, en nuestro controlador <code>RelacionController</code> vamos a escribir el código necesario para que nos devuelva los datos relacionados con el alumno con id <code>1</code> y la materia con id <code>2</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">web.php</label><label for="__tabbed_3_2">RelacionController.php</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-php highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1"></a><a href="#__codelineno-79-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2"></a><a href="#__codelineno-79-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3"></a><a href="#__codelineno-79-3"><span class="linenos" data-linenos="3 "></span></a>  <span class="k">use</span> <span class="nx">App\Http\Controllers\RelacionController</span><span class="p">;</span>
</span><span id="__span-79-4"><a id="__codelineno-79-4" name="__codelineno-79-4"></a><a href="#__codelineno-79-4"><span class="linenos" data-linenos="4 "></span></a>  <span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>
</span><span id="__span-79-5"><a id="__codelineno-79-5" name="__codelineno-79-5"></a><a href="#__codelineno-79-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-79-6"><a id="__codelineno-79-6" name="__codelineno-79-6"></a><a href="#__codelineno-79-6"><span class="linenos" data-linenos="6 "></span></a>  <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;muchos&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">RelacionController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span> <span class="p">]);</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-php highlight"><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1"></a><a href="#__codelineno-80-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="o">&lt;?</span><span class="nx">php</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2"></a><a href="#__codelineno-80-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3"></a><a href="#__codelineno-80-3"><span class="linenos" data-linenos=" 3 "></span></a>  <span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
</span><span id="__span-80-4"><a id="__codelineno-80-4" name="__codelineno-80-4"></a><a href="#__codelineno-80-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-80-5"><a id="__codelineno-80-5" name="__codelineno-80-5"></a><a href="#__codelineno-80-5"><span class="linenos" data-linenos=" 5 "></span></a>  <span class="k">use</span> <span class="nx">App\Models\Alumno</span><span class="p">;</span>
</span><span id="__span-80-6"><a id="__codelineno-80-6" name="__codelineno-80-6"></a><a href="#__codelineno-80-6"><span class="linenos" data-linenos=" 6 "></span></a>  <span class="k">use</span> <span class="nx">App\Models\Materia</span><span class="p">;</span>
</span><span id="__span-80-7"><a id="__codelineno-80-7" name="__codelineno-80-7"></a><a href="#__codelineno-80-7"><span class="linenos" data-linenos=" 7 "></span></a>  <span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span><span id="__span-80-8"><a id="__codelineno-80-8" name="__codelineno-80-8"></a><a href="#__codelineno-80-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-80-9"><a id="__codelineno-80-9" name="__codelineno-80-9"></a><a href="#__codelineno-80-9"><span class="linenos" data-linenos=" 9 "></span></a>  <span class="k">class</span> <span class="nc">RelacionController</span> <span class="k">extends</span> <span class="nx">Controller</span>
</span><span id="__span-80-10"><a id="__codelineno-80-10" name="__codelineno-80-10"></a><a href="#__codelineno-80-10"><span class="linenos" data-linenos="10 "></span></a>  <span class="p">{</span>
</span><span id="__span-80-11"><a id="__codelineno-80-11" name="__codelineno-80-11"></a><a href="#__codelineno-80-11"><span class="linenos" data-linenos="11 "></span></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-80-12"><a id="__codelineno-80-12" name="__codelineno-80-12"></a><a href="#__codelineno-80-12"><span class="linenos" data-linenos="12 "></span></a>      <span class="nv">$alumno</span> <span class="o">=</span> <span class="nx">Alumno</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-80-13"><a id="__codelineno-80-13" name="__codelineno-80-13"></a><a href="#__codelineno-80-13"><span class="linenos" data-linenos="13 "></span></a>      <span class="nv">$materia</span> <span class="o">=</span> <span class="nx">Materia</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-80-14"><a id="__codelineno-80-14" name="__codelineno-80-14"></a><a href="#__codelineno-80-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-80-15"><a id="__codelineno-80-15" name="__codelineno-80-15"></a><a href="#__codelineno-80-15"><span class="linenos" data-linenos="15 "></span></a>      <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;muchos&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;alumno&#39;</span><span class="p">,</span> <span class="s1">&#39;materia&#39;</span><span class="p">));</span>
</span><span id="__span-80-16"><a id="__codelineno-80-16" name="__codelineno-80-16"></a><a href="#__codelineno-80-16"><span class="linenos" data-linenos="16 "></span></a>    <span class="p">}</span>
</span><span id="__span-80-17"><a id="__codelineno-80-17" name="__codelineno-80-17"></a><a href="#__codelineno-80-17"><span class="linenos" data-linenos="17 "></span></a>  <span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p><span class="success"><strong>RELLENANDO LA BASE DE DATOS</strong></span></p>
<p>Necesitamos meter algunos registros en nuestra base de datos, por tanto, vamos a crear varios datos en nuestro sistema con las siguientes sentencias SQL.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Tabla Alumnos</label><label for="__tabbed_4_2">Tabla Materias</label><label for="__tabbed_4_3">Tabla Alumno_Materia</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-sql highlight"><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1"></a><a href="#__codelineno-81-1"><span class="linenos" data-linenos="1 "></span></a><span class="w">  </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">alumnos</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">nombre</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2"></a><a href="#__codelineno-81-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Antonio&#39;</span><span class="p">),</span>
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3"></a><a href="#__codelineno-81-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Laura&#39;</span><span class="p">),</span>
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4"></a><a href="#__codelineno-81-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Marta&#39;</span><span class="p">),</span>
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5"></a><a href="#__codelineno-81-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Pedro&#39;</span><span class="p">);</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-sql highlight"><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1"></a><a href="#__codelineno-82-1"><span class="linenos" data-linenos="1 "></span></a><span class="w">  </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">materias</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">nombre</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span>
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2"></a><a href="#__codelineno-82-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Programacion&#39;</span><span class="p">),</span>
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3"></a><a href="#__codelineno-82-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Interfaces&#39;</span><span class="p">),</span>
</span><span id="__span-82-4"><a id="__codelineno-82-4" name="__codelineno-82-4"></a><a href="#__codelineno-82-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;JavaScript&#39;</span><span class="p">),</span>
</span><span id="__span-82-5"><a id="__codelineno-82-5" name="__codelineno-82-5"></a><a href="#__codelineno-82-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Sistemas&#39;</span><span class="p">);</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-sql highlight"><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1"></a><a href="#__codelineno-83-1"><span class="linenos" data-linenos="1 "></span></a><span class="w">  </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">alumno_materia</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">alumno_id</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">materia_id</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2"></a><a href="#__codelineno-83-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">  </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3"></a><a href="#__codelineno-83-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">  </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4"></a><a href="#__codelineno-83-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">  </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5"></a><a href="#__codelineno-83-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">  </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span>
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6"></a><a href="#__codelineno-83-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">  </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span>
</span><span id="__span-83-7"><a id="__codelineno-83-7" name="__codelineno-83-7"></a><a href="#__codelineno-83-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">  </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span>
</span><span id="__span-83-8"><a id="__codelineno-83-8" name="__codelineno-83-8"></a><a href="#__codelineno-83-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">  </span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span>
</span><span id="__span-83-9"><a id="__codelineno-83-9" name="__codelineno-83-9"></a><a href="#__codelineno-83-9"><span class="linenos" data-linenos="9 "></span></a><span class="w">  </span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span></code></pre></div>
</div>
</div>
</div>
<p><span class="success"><strong>CREANDO LA VISTA CON LOS DATOS</strong></span></p>
<p>El último paso que vamos a hacer es, listar los datos relacionados en una vista o plantilla <code>Blade</code> sencilla. Para ello nos creamos el archivo <code>muchos.blade.php</code> ya que es el nombre que hemos puesto en nuestro archivo de rutas.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Alumnos que cursan materias</label><label for="__tabbed_5_2">Materias cursadas por alumnos</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1"></a><a href="#__codelineno-84-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row justify-content-center&quot;</span><span class="p">&gt;</span>
</span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2"></a><a href="#__codelineno-84-2"><span class="linenos" data-linenos=" 2 "></span></a>  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-auto&quot;</span><span class="p">&gt;</span>
</span><span id="__span-84-3"><a id="__codelineno-84-3" name="__codelineno-84-3"></a><a href="#__codelineno-84-3"><span class="linenos" data-linenos=" 3 "></span></a>    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Alumno {{ $alumno -&gt; nombre }} está cursando las materias<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span><span id="__span-84-4"><a id="__codelineno-84-4" name="__codelineno-84-4"></a><a href="#__codelineno-84-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-84-5"><a id="__codelineno-84-5" name="__codelineno-84-5"></a><a href="#__codelineno-84-5"><span class="linenos" data-linenos=" 5 "></span></a>    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped table-hover&quot;</span><span class="p">&gt;</span>
</span><span id="__span-84-6"><a id="__codelineno-84-6" name="__codelineno-84-6"></a><a href="#__codelineno-84-6"><span class="linenos" data-linenos=" 6 "></span></a>      <span class="p">&lt;</span><span class="nt">thead</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-primary text-white&quot;</span><span class="p">&gt;</span>
</span><span id="__span-84-7"><a id="__codelineno-84-7" name="__codelineno-84-7"></a><a href="#__codelineno-84-7"><span class="linenos" data-linenos=" 7 "></span></a>        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>MATERIAS<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="__span-84-8"><a id="__codelineno-84-8" name="__codelineno-84-8"></a><a href="#__codelineno-84-8"><span class="linenos" data-linenos=" 8 "></span></a>      <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
</span><span id="__span-84-9"><a id="__codelineno-84-9" name="__codelineno-84-9"></a><a href="#__codelineno-84-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-84-10"><a id="__codelineno-84-10" name="__codelineno-84-10"></a><a href="#__codelineno-84-10"><span class="linenos" data-linenos="10 "></span></a>      <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span><span id="__span-84-11"><a id="__codelineno-84-11" name="__codelineno-84-11"></a><a href="#__codelineno-84-11"><span class="linenos" data-linenos="11 "></span></a>        @foreach ($alumno -&gt; materias as $registro)
</span><span id="__span-84-12"><a id="__codelineno-84-12" name="__codelineno-84-12"></a><a href="#__codelineno-84-12"><span class="linenos" data-linenos="12 "></span></a>          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="__span-84-13"><a id="__codelineno-84-13" name="__codelineno-84-13"></a><a href="#__codelineno-84-13"><span class="linenos" data-linenos="13 "></span></a>            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="__span-84-14"><a id="__codelineno-84-14" name="__codelineno-84-14"></a><a href="#__codelineno-84-14"><span class="linenos" data-linenos="14 "></span></a>                {{ $registro -&gt; nombre }}
</span><span id="__span-84-15"><a id="__codelineno-84-15" name="__codelineno-84-15"></a><a href="#__codelineno-84-15"><span class="linenos" data-linenos="15 "></span></a>             <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="__span-84-16"><a id="__codelineno-84-16" name="__codelineno-84-16"></a><a href="#__codelineno-84-16"><span class="linenos" data-linenos="16 "></span></a>          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="__span-84-17"><a id="__codelineno-84-17" name="__codelineno-84-17"></a><a href="#__codelineno-84-17"><span class="linenos" data-linenos="17 "></span></a>        @endforeach
</span><span id="__span-84-18"><a id="__codelineno-84-18" name="__codelineno-84-18"></a><a href="#__codelineno-84-18"><span class="linenos" data-linenos="18 "></span></a>      <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span><span id="__span-84-19"><a id="__codelineno-84-19" name="__codelineno-84-19"></a><a href="#__codelineno-84-19"><span class="linenos" data-linenos="19 "></span></a>    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</span><span id="__span-84-20"><a id="__codelineno-84-20" name="__codelineno-84-20"></a><a href="#__codelineno-84-20"><span class="linenos" data-linenos="20 "></span></a>  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-84-21"><a id="__codelineno-84-21" name="__codelineno-84-21"></a><a href="#__codelineno-84-21"><span class="linenos" data-linenos="21 "></span></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1"></a><a href="#__codelineno-85-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row justify-content-center&quot;</span><span class="p">&gt;</span>
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2"></a><a href="#__codelineno-85-2"><span class="linenos" data-linenos=" 2 "></span></a>  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-auto&quot;</span><span class="p">&gt;</span>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3"></a><a href="#__codelineno-85-3"><span class="linenos" data-linenos=" 3 "></span></a>    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>La materia {{ $materia -&gt; nombre }} la están cursando los alumnos<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4"></a><a href="#__codelineno-85-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5"></a><a href="#__codelineno-85-5"><span class="linenos" data-linenos=" 5 "></span></a>    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped table-hover&quot;</span><span class="p">&gt;</span>
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6"></a><a href="#__codelineno-85-6"><span class="linenos" data-linenos=" 6 "></span></a>      <span class="p">&lt;</span><span class="nt">thead</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-primary text-white&quot;</span><span class="p">&gt;</span>
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7"></a><a href="#__codelineno-85-7"><span class="linenos" data-linenos=" 7 "></span></a>        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>ALUMNOS<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8"></a><a href="#__codelineno-85-8"><span class="linenos" data-linenos=" 8 "></span></a>      <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9"></a><a href="#__codelineno-85-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-85-10"><a id="__codelineno-85-10" name="__codelineno-85-10"></a><a href="#__codelineno-85-10"><span class="linenos" data-linenos="10 "></span></a>      <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span><span id="__span-85-11"><a id="__codelineno-85-11" name="__codelineno-85-11"></a><a href="#__codelineno-85-11"><span class="linenos" data-linenos="11 "></span></a>        @foreach ($materia -&gt; alumnos as $registro)
</span><span id="__span-85-12"><a id="__codelineno-85-12" name="__codelineno-85-12"></a><a href="#__codelineno-85-12"><span class="linenos" data-linenos="12 "></span></a>          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="__span-85-13"><a id="__codelineno-85-13" name="__codelineno-85-13"></a><a href="#__codelineno-85-13"><span class="linenos" data-linenos="13 "></span></a>            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="__span-85-14"><a id="__codelineno-85-14" name="__codelineno-85-14"></a><a href="#__codelineno-85-14"><span class="linenos" data-linenos="14 "></span></a>              {{ $registro -&gt; nombre }}
</span><span id="__span-85-15"><a id="__codelineno-85-15" name="__codelineno-85-15"></a><a href="#__codelineno-85-15"><span class="linenos" data-linenos="15 "></span></a>            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="__span-85-16"><a id="__codelineno-85-16" name="__codelineno-85-16"></a><a href="#__codelineno-85-16"><span class="linenos" data-linenos="16 "></span></a>          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="__span-85-17"><a id="__codelineno-85-17" name="__codelineno-85-17"></a><a href="#__codelineno-85-17"><span class="linenos" data-linenos="17 "></span></a>        @endforeach
</span><span id="__span-85-18"><a id="__codelineno-85-18" name="__codelineno-85-18"></a><a href="#__codelineno-85-18"><span class="linenos" data-linenos="18 "></span></a>      <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span><span id="__span-85-19"><a id="__codelineno-85-19" name="__codelineno-85-19"></a><a href="#__codelineno-85-19"><span class="linenos" data-linenos="19 "></span></a>    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</span><span id="__span-85-20"><a id="__codelineno-85-20" name="__codelineno-85-20"></a><a href="#__codelineno-85-20"><span class="linenos" data-linenos="20 "></span></a>  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-85-21"><a id="__codelineno-85-21" name="__codelineno-85-21"></a><a href="#__codelineno-85-21"><span class="linenos" data-linenos="21 "></span></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
</div>
</div>
<hr />












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2024-2025 Jesús García - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/aitormedrano" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.2 4.2 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84q-.51 0-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<a.medrano@edu.gva.es>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 12.13c-.15.01-.29.06-.39.17l-1 1 2.05 2 1-1c.22-.21.22-.56 0-.77l-1.24-1.23a.56.56 0 0 0-.38-.17m-2 1.75L13 19.94V22h2.06l6.06-6.07M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7v-.89l8.24-8.22c.47-.49 1.12-.76 1.8-.76.34 0 .68.06 1 .19V6c0-1.12-.92-2-2.04-2m0 4-8 5-8-5V6l8 5 8-5"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["header.autohide", "toc.integrate", "content.tabs.link", "content.code.copy", "content.code.select", "navigation.top", "content.code.annotate"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>